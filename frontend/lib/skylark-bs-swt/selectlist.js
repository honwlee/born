/**
 * skylark-bs-swt - The skylark bootstrap standard widget tookit
 * @author Hudaokeji, Inc.
 * @version v0.9.0-beta
 * @link https://github.com/skylarkui/skylark-bs-swt/
 * @license MIT
 */
define(["skylark-utils/langx","skylark-utils/browser","skylark-utils/eventer","skylark-utils/noder","skylark-utils/geom","skylark-utils/velm","skylark-utils/query","./sbswt"],function(e,t,i,s,l,n,d,o){var a=d.fn.selectlist,r=o.Selectlist=o.WidgetBase.inherit({klassName:"Selectlist",init:function(t,i){this.$element=d(t),this.options=e.mixin({},d.fn.selectlist.defaults,i),this.$button=this.$element.find(".btn.dropdown-toggle"),this.$hiddenField=this.$element.find(".hidden-field"),this.$label=this.$element.find(".selected-label"),this.$dropdownMenu=this.$element.find(".dropdown-menu"),this.$button.dropdown(),this.$element.on("click.fu.selectlist",".dropdown-menu a",e.proxy(this.itemClicked,this)),this.setDefaultSelection(),"auto"!==i.resize&&"auto"!==this.$element.attr("data-resize")||this.resize();var s=this.$dropdownMenu.children("li");0===s.length&&(this.disable(),this.doSelect(d(this.options.emptyLabelHTML))),this.$element.on("shown.bs.dropdown",function(){var e=d(this);d(document).on("keypress.fu.selectlist",function(t){var i=String.fromCharCode(t.which);e.find("li").each(function(e,t){if(d(t).text().charAt(0).toLowerCase()===i)return d(t).children("a").focus(),!1})})}),this.$element.on("hide.bs.dropdown",function(){d(document).off("keypress.fu.selectlist")})},destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},doSelect:function(e){var t;this.$selectedItem=t=e,this.$hiddenField.val(this.$selectedItem.attr("data-value")),this.$label.html(d(this.$selectedItem.children()[0]).html()),this.$element.find("li").each(function(){t.is(d(this))?d(this).attr("data-selected",!0):d(this).removeData("selected").removeAttr("data-selected")})},itemClicked:function(e){this.$element.trigger("clicked.fu.selectlist",this.$selectedItem),e.preventDefault(),d(e.currentTarget).parent("li").is(".disabled, :disabled")||(d(e.target).parent().is(this.$selectedItem)||this.itemChanged(e),this.$element.find(".dropdown-toggle").focus())},itemChanged:function(e){this.doSelect(d(e.target).closest("li"));var t=this.selectedItem();this.$element.trigger("changed.fu.selectlist",t)},resize:function(){var e=0,t=0,i=d("<div/>").addClass("selectlist-sizer");Boolean(d(document).find("html").hasClass("fuelux"))?d(document.body).append(i):d(".fuelux:first").append(i),i.append(this.$element.clone()),this.$element.find("a").each(function(){i.find(".selected-label").text(d(this).text()),t=i.find(".selectlist").outerWidth(),t+=i.find(".sr-only").outerWidth(),t>e&&(e=t)}),e<=1||(this.$button.css("width",e),this.$dropdownMenu.css("width",e),i.remove())},selectedItem:function(){var t=this.$selectedItem.text();return e.mixin({text:t},this.$selectedItem.data())},selectByText:function(e){var t=d([]);this.$element.find("li").each(function(){if((this.textContent||this.innerText||d(this).text()||"").toLowerCase()===(e||"").toLowerCase())return t=d(this),!1}),this.doSelect(t)},selectByValue:function(e){var t='li[data-value="'+e+'"]';this.selectBySelector(t)},selectByIndex:function(e){var t="li:eq("+e+")";this.selectBySelector(t)},selectBySelector:function(e){var t=this.$element.find(e);this.doSelect(t)},setDefaultSelection:function(){var e=this.$element.find("li[data-selected=true]").eq(0);0===e.length&&(e=this.$element.find("li").has("a").eq(0)),this.doSelect(e)},enable:function(){this.$element.removeClass("disabled"),this.$button.removeClass("disabled")},disable:function(){this.$element.addClass("disabled"),this.$button.addClass("disabled")}});return r.prototype.getValue=r.prototype.selectedItem,d.fn.selectlist=function(e){var t,i=Array.prototype.slice.call(arguments,1),s=this.each(function(){var s=d(this),l=s.data("fu.selectlist"),n="object"==typeof e&&e;l||s.data("fu.selectlist",l=new r(this,n)),"string"==typeof e&&(t=l[e].apply(l,i))});return void 0===t?s:t},d.fn.selectlist.defaults={emptyLabelHTML:'<li data-value=""><a href="#">No items</a></li>'},d.fn.selectlist.Constructor=r,d.fn.selectlist.noConflict=function(){return d.fn.selectlist=a,this},d.fn.selectlist});
//# sourceMappingURL=sourcemaps/selectlist.js.map
