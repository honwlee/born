{"version":3,"sources":["lightbox.js"],"names":["define","langx","browser","eventer","noder","geom","velm","$","sbswt","Plugin","option","this","each","$this","wgt","data","options","mixin","Lightbox","DEFAULTS","action","slide","modal","navigateTo","WidgetBase","inherit","klassName","init","$element","config","_this","_config","_$modalArrows","_galleryIndex","_galleryName","_padding","_border","_titleIsShown","_footerIsShown","_wantedWidth","_wantedHeight","_touchstartX","_touchendX","_modalId","Math","floor","random","_$element","_isBootstrap3","fn","Constructor","VERSION","h4","title","btn","strings","close","header","alwaysShowClose","footer","body","dialog","doc","append","_$modal","_$modalDialog","find","first","_$modalContent","_$modalBody","_$modalHeader","_$modalFooter","_$lightboxContainer","_$lightboxBodyOne","children","_$lightboxBodyTwo","last","_calculateBorders","_calculatePadding","_$galleryItems","document","index","on","_navigationalBinder","bind","showArrows","length","leftArrow","rightArrow","event","preventDefault","navigateLeft","navigateRight","updateNavigation","onShow","_toggleLoading","_handle","onShown","call","onHide","off","window","remove","onHidden","_resize","changedTouches","screenX","_swipeGesure","get","element","wrapping","onNavigate","$nav","addClass","removeClass","keyCode","_detectRemoteType","src","type","_isImage","_getYoutubeId","_getVimeoId","_getInstagramId","indexOf","string","match","_containerToUse","_this2","$toUse","$current","hasClass","setTimeout","empty","_updateTitleAndFooter","currentRemote","attr","currentType","_error","_preloadImage","_preloadImageByIndex","_showYoutubeVideo","_showVimeoVideo","_showInstagramVideo","_showHtml5Video","_loadRemoteContent","matches","show","css","loadingMessage","top","_totalCssByAttribute","right","bottom","left","attribute","parseInt","caption","html","remote","$containerForElement","id","query","substr","width","height","_showVideoIframe","onContentLoaded","url","_this3","disableExternalCheck","_isExternal","load","proxy","trigger","toLowerCase","location","protocol","replace","RegExp","http:","https:","host","message","console","error","startIndex","numberOfTimes","next","$containerForImage","_this4","img","Image","loadingTimeout","onload","clearTimeout","image","onerror","fail","imageAspecRatio","widthBorderAndPadding","addMargin","clientWidth","discountMargin","maxWidth","min","headerHeight","footerHeight","outerHeight","borderPadding","margins","parseFloat","maxHeight","ceil","_handleUpdate","Exception","handleUpdate","_jQueryInterface","_this5","extend","Default","old","lightbox","noConflict"],"mappings":";;;;;;;AAMAA,QACI,sBACA,wBACA,wBACA,sBACA,qBACA,qBACA,sBACA,WACD,SAASC,EAAOC,EAASC,EAASC,EAAOC,EAAMC,EAAMC,EAAGC,GAmiBvD,QAASC,GAAOC,GACZ,MAAOC,MAAKC,KAAK,WACb,GAAIC,GAAQN,EAAEI,MACVG,EAAMD,EAAME,KAAK,eACjBC,EAAUf,EAAMgB,SAAUC,EAASC,SAAUN,EAAME,OAAyB,gBAAVL,IAAsBA,GACxFU,EAA0B,gBAAVV,GAAqBA,EAASM,EAAQK,KAErDP,IAGDA,EAAIQ,QAAQA,MAAM,QACG,gBAAVZ,GACPI,EAAIS,WAAWb,GACRU,GACPN,EAAIM,MANRP,EAAME,KAAK,cAAgBD,EAAM,GAAII,GAASP,KAAMK,MAziBhE,GAAIE,GAAWV,EAAMU,SAAWV,EAAMgB,WAAWC,SAC7CC,UAAW,WACXC,KAAM,SAASC,EAAUC,GACrB,GAAIC,GAAQnB,IAEZA,MAAKoB,QAAUF,EACflB,KAAKqB,cAAgB,KACrBrB,KAAKsB,cAAgB,EACrBtB,KAAKuB,aAAe,KACpBvB,KAAKwB,SAAW,KAChBxB,KAAKyB,QAAU,KACfzB,KAAK0B,eAAgB,EACrB1B,KAAK2B,gBAAiB,EACtB3B,KAAK4B,aAAe,EACpB5B,KAAK6B,cAAgB,EACrB7B,KAAK8B,aAAe,EACpB9B,KAAK+B,WAAa,EAElB/B,KAAKgC,SAAW,gBAAkBC,KAAKC,MAAsB,IAAhBD,KAAKE,SAAkB,GACpEnC,KAAKoC,UAAYxC,EAAEqB,GAEnBjB,KAAKqC,cAAqD,GAArCzC,EAAE0C,GAAG3B,MAAM4B,YAAYC,QAAQ,EAEpD,IAAIC,GAAK,4BAA8BzC,KAAKoB,QAAQsB,OAAS,UAAY,QACrEC,EAAM,wEAA0E3C,KAAKoB,QAAQwB,QAAQC,MAAQ,qDAE7GC,EAAS,4BAA8B9C,KAAKoB,QAAQsB,OAAS1C,KAAKoB,QAAQ2B,gBAAkB,GAAK,SAAW,MAAQ/C,KAAKqC,cAAgBM,EAAMF,EAAKA,EAAKE,GAAO,SAChKK,EAAS,4BAA8BhD,KAAKoB,QAAQ4B,OAAS,GAAK,SAAW,MAAQhD,KAAKoB,QAAQ4B,QAAU,UAAY,SACxHC,EAAO,0KACPC,EAAS,wEAA0EJ,EAASG,EAAOD,EAAS,cAChHpD,GAAEI,KAAKoB,QAAQ+B,IAAIF,MAAMG,OAAO,YAAcpD,KAAKgC,SAAW,mGAAqGkB,EAAS,UAE5KlD,KAAKqD,QAAUzD,EAAE,IAAMI,KAAKgC,SAAUhC,KAAKoB,QAAQ+B,KACnDnD,KAAKsD,cAAgBtD,KAAKqD,QAAQE,KAAK,iBAAiBC,QACxDxD,KAAKyD,eAAiBzD,KAAKqD,QAAQE,KAAK,kBAAkBC,QAC1DxD,KAAK0D,YAAc1D,KAAKqD,QAAQE,KAAK,eAAeC,QACpDxD,KAAK2D,cAAgB3D,KAAKqD,QAAQE,KAAK,iBAAiBC,QACxDxD,KAAK4D,cAAgB5D,KAAKqD,QAAQE,KAAK,iBAAiBC,QAExDxD,KAAK6D,oBAAsB7D,KAAK0D,YAAYH,KAAK,4BAA4BC,QAC7ExD,KAAK8D,kBAAoB9D,KAAK6D,oBAAoBE,WAAWP,QAC7DxD,KAAKgE,kBAAoBhE,KAAK6D,oBAAoBE,WAAWE,OAE7DjE,KAAKyB,QAAUzB,KAAKkE,oBACpBlE,KAAKwB,SAAWxB,KAAKmE,oBAErBnE,KAAKuB,aAAevB,KAAKoC,UAAUhC,KAAK,WACpCJ,KAAKuB,eACLvB,KAAKoE,eAAiBxE,EAAEyE,SAASpB,MAAMM,KAAK,mBAAqBvD,KAAKuB,aAAe,MACrFvB,KAAKsB,cAAgBtB,KAAKoE,eAAeE,MAAMtE,KAAKoC,WACpDxC,EAAEyE,UAAUE,GAAG,uBAAwBvE,KAAKwE,oBAAoBC,KAAKzE,OAGjEA,KAAKoB,QAAQsD,YAAc1E,KAAKoE,eAAeO,OAAS,IACxD3E,KAAK6D,oBAAoBT,OAAO,sDAAwDpD,KAAKoB,QAAQwD,UAAY,mBAAqB5E,KAAKoB,QAAQyD,WAAa,cAChK7E,KAAKqB,cAAgBrB,KAAK6D,oBAAoBN,KAAK,iCAAiCC,QACpFxD,KAAK6D,oBAAoBU,GAAG,QAAS,gBAAiB,SAASO,GAE3D,MADAA,GAAMC,iBACC5D,EAAM6D,iBAEjBhF,KAAK6D,oBAAoBU,GAAG,QAAS,eAAgB,SAASO,GAE1D,MADAA,GAAMC,iBACC5D,EAAM8D,kBAEjBjF,KAAKkF,qBAIblF,KAAKqD,QAAQkB,GAAG,gBAAiBvE,KAAKoB,QAAQ+D,OAAOV,KAAKzE,OAAOuE,GAAG,iBAAkB,WAGlF,MAFApD,GAAMiE,gBAAe,GACrBjE,EAAMkE,UACClE,EAAMC,QAAQkE,QAAQC,KAAKpE,KACnCoD,GAAG,gBAAiBvE,KAAKoB,QAAQoE,OAAOf,KAAKzE,OAAOuE,GAAG,kBAAmB,WAMzE,MALIpD,GAAMI,eACN3B,EAAEyE,UAAUoB,IAAI,wBAChB7F,EAAE8F,QAAQD,IAAI,wBAElBtE,EAAMkC,QAAQsC,SACPxE,EAAMC,QAAQwE,SAASL,KAAKpE,KACpCR,MAAMX,KAAKoB,SAEdxB,EAAE8F,QAAQnB,GAAG,sBAAuB,WAChCpD,EAAM0E,QAAQ1E,EAAMS,aAAcT,EAAMU,iBAE5C7B,KAAK6D,oBAAoBU,GAAG,aAAc,WACtCpD,EAAMW,aAAegD,MAAMgB,eAAe,GAAGC,UAC9CxB,GAAG,WAAY,WACdpD,EAAMY,WAAa+C,MAAMgB,eAAe,GAAGC,QAC3C5E,EAAM6E,kBAIdC,IAAK,WACD,MAAO1F,GAASC,UAGpB0F,QAAS,WACL,MAAOlG,MAAKoC,WAGhBzB,MAAO,WACH,MAAOX,MAAKqD,SAGhBzC,WAAY,SAAS0D,GACjB,MAAIA,GAAQ,GAAKA,EAAQtE,KAAKoE,eAAeO,OAAS,EAAU3E,MAEhEA,KAAKsB,cAAgBgD,EAErBtE,KAAKkF,mBAELlF,KAAKoC,UAAYxC,EAAEI,KAAKoE,eAAe6B,IAAIjG,KAAKsB,oBAChDtB,MAAKqF,YAGTL,aAAc,WACV,GAAKhF,KAAKoE,gBAEyB,IAA/BpE,KAAKoE,eAAeO,OAAxB,CAEA,GAA2B,IAAvB3E,KAAKsB,cAAqB,CAC1B,IAAItB,KAAKoB,QAAQ+E,SACZ,MADsBnG,MAAKsB,cAAgBtB,KAAKoE,eAAeO,OAAS,MAG7E3E,MAAKsB,eAGT,OADAtB,MAAKoB,QAAQgF,WAAWb,KAAKvF,KAAM,OAAQA,KAAKsB,eACzCtB,KAAKY,WAAWZ,KAAKsB,iBAGhC2D,cAAe,WAEX,GAAKjF,KAAKoE,gBAEyB,IAA/BpE,KAAKoE,eAAeO,OAAxB,CAEA,GAAI3E,KAAKsB,gBAAkBtB,KAAKoE,eAAeO,OAAS,EAAG,CACvD,IAAI3E,KAAKoB,QAAQ+E,SACZ,MADsBnG,MAAKsB,cAAgB,MAGhDtB,MAAKsB,eAGT,OADAtB,MAAKoB,QAAQgF,WAAWb,KAAKvF,KAAM,QAASA,KAAKsB,eAC1CtB,KAAKY,WAAWZ,KAAKsB,iBAEhC4D,iBAAkB,WACd,IAAKlF,KAAKoB,QAAQ+E,SAAU,CACxB,GAAIE,GAAOrG,KAAK6D,oBAAoBN,KAAK,gCACd,KAAvBvD,KAAKsB,cAAqB+E,EAAK9C,KAAK,iBAAiB+C,SAAS,YAC7DD,EAAK9C,KAAK,iBAAiBgD,YAAY,YAExCvG,KAAKsB,gBAAkBtB,KAAKoE,eAAeO,OAAS,EAAG0B,EAAK9C,KAAK,gBAAgB+C,SAAS,YACzFD,EAAK9C,KAAK,gBAAgBgD,YAAY,cAInD1D,MAAO,WACH,MAAO7C,MAAKqD,QAAQ1C,MAAM,SAE9B6D,oBAAqB,SAASM,GAE1B,MADAA,GAAQA,GAASY,OAAOZ,MACF,KAAlBA,EAAM0B,QAAuBxG,KAAKiF,gBAChB,KAAlBH,EAAM0B,QAAuBxG,KAAKgF,eAAtC,QAEJyB,kBAAmB,SAASC,EAAKC,GAW7B,MATAA,GAAOA,IAAQ,GAEVA,GAAQ3G,KAAK4G,SAASF,KAAMC,EAAO,UACnCA,GAAQ3G,KAAK6G,cAAcH,KAAMC,EAAO,YACxCA,GAAQ3G,KAAK8G,YAAYJ,KAAMC,EAAO,UACtCA,GAAQ3G,KAAK+G,gBAAgBL,KAAMC,EAAO,eAE1CA,IAAS,QAAS,UAAW,QAAS,YAAa,QAAS,OAAOK,QAAQL,GAAQ,KAAGA,EAAO,OAE3FA,GAEXC,SAAU,SAASK,GACf,MAAOA,IAAUA,EAAOC,MAAM,0EAElCC,gBAAiB,WACb,GAAIC,GAASpH,KAGTqH,EAASrH,KAAKgE,kBACdsD,EAAWtH,KAAK8D,iBAcpB,OAZI9D,MAAKgE,kBAAkBuD,SAAS,QAChCF,EAASrH,KAAK8D,kBACdwD,EAAWtH,KAAKgE,mBAGpBsD,EAASf,YAAY,WACrBiB,WAAW,WACFJ,EAAOpD,kBAAkBuD,SAAS,OAAOH,EAAOpD,kBAAkByD,QAClEL,EAAOtD,kBAAkByD,SAAS,OAAOH,EAAOtD,kBAAkB2D,SACxE,KAEHJ,EAAOf,SAAS,WACTe,GAEXhC,QAAS,WAEL,GAAIgC,GAASrH,KAAKmH,iBAClBnH,MAAK0H,uBAEL,IAAIC,GAAgB3H,KAAKoC,UAAUwF,KAAK,gBAAkB5H,KAAKoC,UAAUwF,KAAK,cAAgB5H,KAAKoC,UAAUwF,KAAK,QAC9GC,EAAc7H,KAAKyG,kBAAkBkB,EAAe3H,KAAKoC,UAAUwF,KAAK,eAAgB,EAE5F,KAAK,QAAS,UAAW,QAAS,YAAa,QAAS,OAAOZ,QAAQa,GAAe,EAAG,MAAO7H,MAAK8H,OAAO9H,KAAKoB,QAAQwB,QAAQ+D,KAEjI,QAAQkB,GACJ,IAAK,QACD7H,KAAK+H,cAAcJ,EAAeN,GAClCrH,KAAKgI,qBAAqBhI,KAAKsB,cAAe,EAC9C,MACJ,KAAK,UACDtB,KAAKiI,kBAAkBN,EAAeN,EACtC,MACJ,KAAK,QACDrH,KAAKkI,gBAAgBlI,KAAK8G,YAAYa,GAAgBN,EACtD,MACJ,KAAK,YACDrH,KAAKmI,oBAAoBnI,KAAK+G,gBAAgBY,GAAgBN,EAC9D,MACJ,KAAK,QACDrH,KAAKoI,gBAAgBT,EAAeN,EACpC,MACJ,SAEIrH,KAAKqI,mBAAmBV,EAAeN,GAG/C,MAAOrH,OAEX6G,cAAe,SAASI,GACpB,IAAKA,EAAQ,OAAO,CACpB,IAAIqB,GAAUrB,EAAOC,MAAM,kEAC3B,UAAOoB,GAAiC,KAAtBA,EAAQ,GAAG3D,SAAgB2D,EAAQ,IAEzDxB,YAAa,SAASG,GAClB,SAAOA,GAAUA,EAAOD,QAAQ,SAAW,IAAIC,GAEnDF,gBAAiB,SAASE,GACtB,SAAOA,GAAUA,EAAOD,QAAQ,aAAe,IAAIC,GAEvD7B,eAAgB,SAASmD,GAWrB,MAVAA,GAAOA,IAAQ,EACXA,GACAvI,KAAKsD,cAAckF,IAAI,UAAW,QAClCxI,KAAKqD,QAAQkD,YAAY,WACzB3G,EAAE,mBAAmBwD,OAAOpD,KAAKoB,QAAQqH,kBAEzCzI,KAAKsD,cAAckF,IAAI,UAAW,SAClCxI,KAAKqD,QAAQiD,SAAS,WACtB1G,EAAE,mBAAmB2D,KAAK,yBAAyBoC,UAEhD3F,MAEXkE,kBAAmB,WACf,OACIwE,IAAK1I,KAAK2I,qBAAqB,oBAC/BC,MAAO5I,KAAK2I,qBAAqB,sBACjCE,OAAQ7I,KAAK2I,qBAAqB,uBAClCG,KAAM9I,KAAK2I,qBAAqB,uBAGxCxE,kBAAmB,WACf,OACIuE,IAAK1I,KAAK2I,qBAAqB,eAC/BC,MAAO5I,KAAK2I,qBAAqB,iBACjCE,OAAQ7I,KAAK2I,qBAAqB,kBAClCG,KAAM9I,KAAK2I,qBAAqB,kBAGxCA,qBAAsB,SAASI,GAC3B,MAAOC,UAAShJ,KAAKsD,cAAckF,IAAIO,GAAY,IAAMC,SAAShJ,KAAKyD,eAAe+E,IAAIO,GAAY,IAAMC,SAAShJ,KAAK0D,YAAY8E,IAAIO,GAAY,KAE1JrB,sBAAuB,WACnB,GAAIhF,GAAQ1C,KAAKoC,UAAUhC,KAAK,UAAY,GACxC6I,EAAUjJ,KAAKoC,UAAUhC,KAAK,WAAa,EAc/C,OAZAJ,MAAK0B,eAAgB,EACjBgB,GAAS1C,KAAKoB,QAAQ2B,iBACtB/C,KAAK0B,eAAgB,EACrB1B,KAAK2D,cAAc6E,IAAI,UAAW,IAAIjF,KAAK,gBAAgB2F,KAAKxG,GAAS,WACtE1C,KAAK2D,cAAc6E,IAAI,UAAW,QAEzCxI,KAAK2B,gBAAiB,EAClBsH,GACAjJ,KAAK2B,gBAAiB,EACtB3B,KAAK4D,cAAc4E,IAAI,UAAW,IAAIU,KAAKD,IACxCjJ,KAAK4D,cAAc4E,IAAI,UAAW,QAElCxI,MAEXiI,kBAAmB,SAASkB,EAAQC,GAChC,GAAIC,GAAKrJ,KAAK6G,cAAcsC,GACxBG,EAAQH,EAAOnC,QAAQ,KAAO,EAAImC,EAAOI,OAAOJ,EAAOnC,QAAQ,MAAQ,GACvEwC,EAAQxJ,KAAKoC,UAAUhC,KAAK,UAAY,IACxCqJ,EAASzJ,KAAKoC,UAAUhC,KAAK,WAAaoJ,GAAS,IAAM,IAC7D,OAAOxJ,MAAK0J,iBAAiB,2BAA6BL,EAAK,8BAAgCC,EAAOE,EAAOC,EAAQL,IAEzHlB,gBAAiB,SAASmB,EAAID,GAC1B,GAAII,GAAQxJ,KAAKoC,UAAUhC,KAAK,UAAY,IACxCqJ,EAASzJ,KAAKoC,UAAUhC,KAAK,WAAaoJ,GAAS,IAAM,IAC7D,OAAOxJ,MAAK0J,iBAAiBL,EAAK,cAAeG,EAAOC,EAAQL,IAEpEjB,oBAAqB,SAASkB,EAAID,GAE9B,GAAII,GAAQxJ,KAAKoC,UAAUhC,KAAK,UAAY,IACxCqJ,EAASD,EAAQ,EAQrB,OAPAH,GAAuB,MAAlBA,EAAGE,WAAqBF,EAAK,IAAMA,EACxCD,EAAqBF,KAAK,kBAAoBM,EAAQ,aAAeC,EAAS,UAAYJ,EAAK,qDAC/FrJ,KAAK6F,QAAQ2D,EAAOC,GACpBzJ,KAAKoB,QAAQuI,gBAAgBpE,KAAKvF,MAC9BA,KAAKqB,eACLrB,KAAKqB,cAAcmH,IAAI,UAAW,QACtCxI,KAAKoF,gBAAe,GACbpF,MAEX0J,iBAAkB,SAASE,EAAKJ,EAAOC,EAAQL,GAQ3C,MANAK,GAASA,GAAUD,EACnBJ,EAAqBF,KAAK,uEAAyEM,EAAQ,aAAeC,EAAS,UAAYG,EAAM,mFACrJ5J,KAAK6F,QAAQ2D,EAAOC,GACpBzJ,KAAKoB,QAAQuI,gBAAgBpE,KAAKvF,MAC9BA,KAAKqB,eAAerB,KAAKqB,cAAcmH,IAAI,UAAW,QAC1DxI,KAAKoF,gBAAe,GACbpF,MAEXoI,gBAAiB,SAASwB,EAAKR,GAE3B,GAAII,GAAQxJ,KAAKoC,UAAUhC,KAAK,UAAY,IACxCqJ,EAASzJ,KAAKoC,UAAUhC,KAAK,WAAaoJ,GAAS,IAAM,IAM7D,OALAJ,GAAqBF,KAAK,sEAAwEM,EAAQ,aAAeC,EAAS,UAAYG,EAAM,mFACpJ5J,KAAK6F,QAAQ2D,EAAOC,GACpBzJ,KAAKoB,QAAQuI,gBAAgBpE,KAAKvF,MAC9BA,KAAKqB,eAAerB,KAAKqB,cAAcmH,IAAI,UAAW,QAC1DxI,KAAKoF,gBAAe,GACbpF,MAEXqI,mBAAoB,SAASuB,EAAKR,GAC9B,GAAIS,GAAS7J,KAETwJ,EAAQxJ,KAAKoC,UAAUhC,KAAK,UAAY,IACxCqJ,EAASzJ,KAAKoC,UAAUhC,KAAK,WAAa,IAE1C0J,EAAuB9J,KAAKoC,UAAUhC,KAAK,0BAA2B,CAmB1E,OAlBAJ,MAAKoF,gBAAe,GAIf0E,GAAyB9J,KAAK+J,YAAYH,IAM3CR,EAAqBF,KAAK,gBAAkBU,EAAM,+CAClD5J,KAAKoB,QAAQuI,gBAAgBpE,KAAKvF,OANlCoJ,EAAqBY,KAAKJ,EAAKhK,EAAEqK,MAAM,WACnC,MAAOJ,GAAOzH,UAAU8H,QAAQ,sBAQpClK,KAAKqB,eACLrB,KAAKqB,cAAcmH,IAAI,UAAW,QAEtCxI,KAAK6F,QAAQ2D,EAAOC,GACbzJ,MAEX+J,YAAa,SAASH,GAClB,GAAI1C,GAAQ0C,EAAI1C,MAAM,6DACtB,OAAwB,gBAAbA,GAAM,IAAmBA,EAAM,GAAGvC,OAAS,GAAKuC,EAAM,GAAGiD,gBAAkBC,SAASC,UAEvE,gBAAbnD,GAAM,IAAmBA,EAAM,GAAGvC,OAAS,GAAKuC,EAAM,GAAGoD,QAAQ,GAAIC,QAAO,MAC/EC,QAAS,GACTC,SAAU,KACXL,SAASC,UAAY,OAAQ,MAAQD,SAASM,MAIzD5C,OAAQ,SAAS6C,GAIb,MAHAC,SAAQC,MAAMF,GACd3K,KAAKmH,kBAAkB+B,KAAKyB,GAC5B3K,KAAK6F,QAAQ,IAAK,KACX7F,MAGXgI,qBAAsB,SAAS8C,EAAYC,GACvC,GAAK/K,KAAKoE,eAAV,CAEA,GAAI4G,GAAOpL,EAAEI,KAAKoE,eAAe6B,IAAI6E,IAAa,EAClD,IAAmB,mBAARE,GAAX,CAEA,GAAItE,GAAMsE,EAAKpD,KAAK,gBAAkBoD,EAAKpD,KAAK,cAAgBoD,EAAKpD,KAAK,OAG1E,QAF+B,UAA3BoD,EAAKpD,KAAK,cAA4B5H,KAAK4G,SAASF,KAAM1G,KAAK+H,cAAcrB,GAAK,GAElFqE,EAAgB,EAAU/K,KAAKgI,qBAAqB8C,EAAa,EAAGC,EAAgB,GAAxF,UAEJhD,cAAe,SAASrB,EAAKuE,GACzB,GAAIC,GAASlL,IAEbiL,GAAqBA,IAAsB,CAE3C,IAAIE,GAAM,GAAIC,MAiCd,OAhCIH,KACA,WAGI,GAAII,GAAiB7D,WAAW,WAC5ByD,EAAmB7H,OAAO8H,EAAO9J,QAAQqH,iBAC1C,IAEH0C,GAAIG,OAAS,WACLD,GAAgBE,aAAaF,GACjCA,EAAiB,IACjB,IAAIG,GAAQ5L,EAAE,UAYd,OAXA4L,GAAM5D,KAAK,MAAOuD,EAAIzE,KACtB8E,EAAMlF,SAAS,aAGfkF,EAAMhD,IAAI,QAAS,QAEnByC,EAAmB/B,KAAKsC,GACpBN,EAAO7J,eAAe6J,EAAO7J,cAAcmH,IAAI,UAAW,IAE9D0C,EAAOrF,QAAQsF,EAAI3B,MAAO2B,EAAI1B,QAC9ByB,EAAO9F,gBAAe,GACf8F,EAAO9J,QAAQuI,gBAAgBpE,KAAK2F,IAE/CC,EAAIM,QAAU,WAEV,MADAP,GAAO9F,gBAAe,GACf8F,EAAOpD,OAAOoD,EAAO9J,QAAQwB,QAAQ8I,MAAQ,KAAOhF,QAIvEyE,EAAIzE,IAAMA,EACHyE,GAEXnF,aAAc,WACV,MAAIhG,MAAK+B,WAAa/B,KAAK8B,aAChB9B,KAAKiF,gBAEZjF,KAAK+B,WAAa/B,KAAK8B,aAChB9B,KAAKgF,eADhB,QAIJa,QAAS,SAAS2D,EAAOC,GAErBA,EAASA,GAAUD,EACnBxJ,KAAK4B,aAAe4H,EACpBxJ,KAAK6B,cAAgB4H,CAErB,IAAIkC,GAAkBnC,EAAQC,EAG1BmC,EAAwB5L,KAAKwB,SAASsH,KAAO9I,KAAKwB,SAASoH,MAAQ5I,KAAKyB,QAAQqH,KAAO9I,KAAKyB,QAAQmH,MAGpGiD,EAAY7L,KAAKoB,QAAQ+B,IAAIF,KAAK6I,YAAc,IAAM,GAAK,EAC3DC,EAAiB/L,KAAKoB,QAAQ+B,IAAIF,KAAK6I,YAAc,IAAM,EAAI,GAE/DE,EAAW/J,KAAKgK,IAAIzC,EAAQoC,EAAuB5L,KAAKoB,QAAQ+B,IAAIF,KAAK6I,YAAcD,EAAW7L,KAAKoB,QAAQ4K,SAE/GxC,GAAQoC,EAAwBI,GAChCvC,GAAUuC,EAAWJ,EAAwBG,GAAkBJ,EAC/DnC,EAAQwC,GACLxC,GAAgBoC,CAEvB,IAAIM,GAAe,EACfC,EAAe,CAIfnM,MAAK2B,iBAAgBwK,EAAenM,KAAK4D,cAAcwI,aAAY,IAAS,IAE5EpM,KAAK0B,gBAAewK,EAAelM,KAAK2D,cAAcyI,aAAY,IAAS,GAE/E,IAAIC,GAAgBrM,KAAKwB,SAASkH,IAAM1I,KAAKwB,SAASqH,OAAS7I,KAAKyB,QAAQoH,OAAS7I,KAAKyB,QAAQiH,IAG9F4D,EAAUC,WAAWvM,KAAKsD,cAAckF,IAAI,eAAiB+D,WAAWvM,KAAKsD,cAAckF,IAAI,kBAE/FgE,EAAYvK,KAAKgK,IAAIxC,EAAQ7J,EAAE8F,QAAQ+D,SAAW4C,EAAgBC,EAAUJ,EAAeC,EAAcnM,KAAKoB,QAAQoL,UAAYH,EAAgBH,EAAeC,EAEjK1C,GAAS+C,IAEThD,EAAQvH,KAAKwK,KAAKD,EAAYb,GAAmBC,GAGrD5L,KAAK6D,oBAAoB2E,IAAI,SAAUgE,GACvCxM,KAAKsD,cAAckF,IAAI,OAAQ,GAAGA,IAAI,WAAYgB,EAElD,IAAI7I,GAAQX,KAAKqD,QAAQjD,KAAK,WAC9B,IAAIO,EAEA,IACIA,EAAM+L,gBACR,MAAOC,GACLhM,EAAMiM,eAGd,MAAO5M,OAEX6M,iBAAkB,SAAS3L,GACvB,GAAI4L,GAAS9M,IAGb,OADAkB,GAASA,MACFlB,KAAKC,KAAK,WACb,GAAIC,GAAQN,EAAEkN,GACV1L,EAAUxB,EAAEmN,UAAWxM,EAASyM,QAAS9M,EAAME,OAA0B,gBAAXc,IAAuBA,EAEzF,IAAIX,GAASuM,EAAQ1L,OAKjCb,GAASC,UACLkC,MAAO,GACPM,OAAQ,GACRgJ,SAAU,KACVQ,UAAW,KACX9H,YAAY,EACZyB,UAAU,EACVQ,KAAM,KACN5D,iBAAiB,EACjB0F,eAAgB,4EAChB7D,UAAW,wBACXC,WAAY,wBACZjC,SACIC,MAAO,QACP6I,KAAM,wBACN/E,KAAM,uEAEVxD,IAAKkB,SACLc,OAAQ,aACRG,QAAS,aACTE,OAAQ,aACRI,SAAU,aACVQ,WAAY,aACZuD,gBAAiB,aA0BrB,IAAIsD,GAAMrN,EAAE0C,GAAG4K,QAaf,OAXAtN,GAAE0C,GAAG4K,SAAWpN,EAChBF,EAAE0C,GAAG4K,SAAS3K,YAAchC,EAM5BX,EAAE0C,GAAG4K,SAASC,WAAa,WAEvB,MADAvN,GAAE0C,GAAG4K,SAAWD,EACTjN,MAEJJ,EAAE0C,GAAG4K","file":"../lightbox.js","sourcesContent":["/*!\n * Lightbox for Bootstrap by @ashleydw\n * https://github.com/ashleydw/lightbox\n *\n * License: https://github.com/ashleydw/lightbox/blob/master/LICENSE\n */\ndefine([\n    \"skylark-utils/langx\",\n    \"skylark-utils/browser\",\n    \"skylark-utils/eventer\",\n    \"skylark-utils/noder\",\n    \"skylark-utils/geom\",\n    \"skylark-utils/velm\",\n    \"skylark-utils/query\",\n    \"./sbswt\"\n], function(langx, browser, eventer, noder, geom, velm, $, sbswt) {\n\n    var Lightbox = sbswt.Lightbox = sbswt.WidgetBase.inherit({\n        klassName: \"Lightbox\",\n        init: function($element, config) {\n            var _this = this;\n\n            this._config = config;\n            this._$modalArrows = null;\n            this._galleryIndex = 0;\n            this._galleryName = null;\n            this._padding = null;\n            this._border = null;\n            this._titleIsShown = false;\n            this._footerIsShown = false;\n            this._wantedWidth = 0;\n            this._wantedHeight = 0;\n            this._touchstartX = 0;\n            this._touchendX = 0;\n\n            this._modalId = 'ekkoLightbox-' + Math.floor(Math.random() * 1000 + 1);\n            this._$element = $($element);\n\n            this._isBootstrap3 = $.fn.modal.Constructor.VERSION[0] == 3;\n\n            var h4 = '<h4 class=\"modal-title\">' + (this._config.title || \"&nbsp;\") + '</h4>';\n            var btn = '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"' + this._config.strings.close + '\"><span aria-hidden=\"true\">&times;</span></button>';\n\n            var header = '<div class=\"modal-header' + (this._config.title || this._config.alwaysShowClose ? '' : ' hide') + '\">' + (this._isBootstrap3 ? btn + h4 : h4 + btn) + '</div>';\n            var footer = '<div class=\"modal-footer' + (this._config.footer ? '' : ' hide') + '\">' + (this._config.footer || \"&nbsp;\") + '</div>';\n            var body = '<div class=\"modal-body\"><div class=\"ekko-lightbox-container\"><div class=\"ekko-lightbox-item fade in show\"></div><div class=\"ekko-lightbox-item fade\"></div></div></div>';\n            var dialog = '<div class=\"modal-dialog\" role=\"document\"><div class=\"modal-content\">' + header + body + footer + '</div></div>';\n            $(this._config.doc.body).append('<div id=\"' + this._modalId + '\" class=\"ekko-lightbox modal fade\" tabindex=\"-1\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">' + dialog + '</div>');\n\n            this._$modal = $('#' + this._modalId, this._config.doc);\n            this._$modalDialog = this._$modal.find('.modal-dialog').first();\n            this._$modalContent = this._$modal.find('.modal-content').first();\n            this._$modalBody = this._$modal.find('.modal-body').first();\n            this._$modalHeader = this._$modal.find('.modal-header').first();\n            this._$modalFooter = this._$modal.find('.modal-footer').first();\n\n            this._$lightboxContainer = this._$modalBody.find('.ekko-lightbox-container').first();\n            this._$lightboxBodyOne = this._$lightboxContainer.children().first();\n            this._$lightboxBodyTwo = this._$lightboxContainer.children().last();\n\n            this._border = this._calculateBorders();\n            this._padding = this._calculatePadding();\n\n            this._galleryName = this._$element.data('gallery');\n            if (this._galleryName) {\n                this._$galleryItems = $(document.body).find('*[data-gallery=\"' + this._galleryName + '\"]');\n                this._galleryIndex = this._$galleryItems.index(this._$element);\n                $(document).on('keydown.ekkoLightbox', this._navigationalBinder.bind(this));\n\n                // add the directional arrows to the modal\n                if (this._config.showArrows && this._$galleryItems.length > 1) {\n                    this._$lightboxContainer.append('<div class=\"ekko-lightbox-nav-overlay\"><a href=\"#\">' + this._config.leftArrow + '</a><a href=\"#\">' + this._config.rightArrow + '</a></div>');\n                    this._$modalArrows = this._$lightboxContainer.find('div.ekko-lightbox-nav-overlay').first();\n                    this._$lightboxContainer.on('click', 'a:first-child', function(event) {\n                        event.preventDefault();\n                        return _this.navigateLeft();\n                    });\n                    this._$lightboxContainer.on('click', 'a:last-child', function(event) {\n                        event.preventDefault();\n                        return _this.navigateRight();\n                    });\n                    this.updateNavigation();\n                }\n            }\n\n            this._$modal.on('show.bs.modal', this._config.onShow.bind(this)).on('shown.bs.modal', function() {\n                _this._toggleLoading(true);\n                _this._handle();\n                return _this._config.onShown.call(_this);\n            }).on('hide.bs.modal', this._config.onHide.bind(this)).on('hidden.bs.modal', function() {\n                if (_this._galleryName) {\n                    $(document).off('keydown.ekkoLightbox');\n                    $(window).off('resize.ekkoLightbox');\n                }\n                _this._$modal.remove();\n                return _this._config.onHidden.call(_this);\n            }).modal(this._config);\n\n            $(window).on('resize.ekkoLightbox', function() {\n                _this._resize(_this._wantedWidth, _this._wantedHeight);\n            });\n            this._$lightboxContainer.on('touchstart', function() {\n                _this._touchstartX = event.changedTouches[0].screenX;\n            }).on('touchend', function() {\n                _this._touchendX = event.changedTouches[0].screenX;\n                _this._swipeGesure();\n            });\n        },\n\n        get: function() {\n            return Lightbox.DEFAULTS;\n        },\n\n        element: function() {\n            return this._$element;\n        },\n\n        modal: function() {\n            return this._$modal;\n        },\n\n        navigateTo: function(index) {\n            if (index < 0 || index > this._$galleryItems.length - 1) return this;\n\n            this._galleryIndex = index;\n\n            this.updateNavigation();\n\n            this._$element = $(this._$galleryItems.get(this._galleryIndex));\n            this._handle();\n        },\n\n        navigateLeft: function() {\n            if (!this._$galleryItems) return;\n\n            if (this._$galleryItems.length === 1) return;\n\n            if (this._galleryIndex === 0) {\n                if (this._config.wrapping) this._galleryIndex = this._$galleryItems.length - 1;\n                else return;\n            } else //circular\n                this._galleryIndex--;\n\n            this._config.onNavigate.call(this, 'left', this._galleryIndex);\n            return this.navigateTo(this._galleryIndex);\n        },\n\n        navigateRight: function() {\n\n            if (!this._$galleryItems) return;\n\n            if (this._$galleryItems.length === 1) return;\n\n            if (this._galleryIndex === this._$galleryItems.length - 1) {\n                if (this._config.wrapping) this._galleryIndex = 0;\n                else return;\n            } else //circular\n                this._galleryIndex++;\n\n            this._config.onNavigate.call(this, 'right', this._galleryIndex);\n            return this.navigateTo(this._galleryIndex);\n        },\n        updateNavigation: function() {\n            if (!this._config.wrapping) {\n                var $nav = this._$lightboxContainer.find('div.ekko-lightbox-nav-overlay');\n                if (this._galleryIndex === 0) $nav.find('a:first-child').addClass('disabled');\n                else $nav.find('a:first-child').removeClass('disabled');\n\n                if (this._galleryIndex === this._$galleryItems.length - 1) $nav.find('a:last-child').addClass('disabled');\n                else $nav.find('a:last-child').removeClass('disabled');\n            }\n        },\n\n        close: function() {\n            return this._$modal.modal('hide');\n        },\n        _navigationalBinder: function(event) {\n            event = event || window.event;\n            if (event.keyCode === 39) return this.navigateRight();\n            if (event.keyCode === 37) return this.navigateLeft();\n        },\n        _detectRemoteType: function(src, type) {\n\n            type = type || false;\n\n            if (!type && this._isImage(src)) type = 'image';\n            if (!type && this._getYoutubeId(src)) type = 'youtube';\n            if (!type && this._getVimeoId(src)) type = 'vimeo';\n            if (!type && this._getInstagramId(src)) type = 'instagram';\n\n            if (!type || ['image', 'youtube', 'vimeo', 'instagram', 'video', 'url'].indexOf(type) < 0) type = 'url';\n\n            return type;\n        },\n        _isImage: function(string) {\n            return string && string.match(/(^data:image\\/.*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\\?|#).*)?$)/i);\n        },\n        _containerToUse: function() {\n            var _this2 = this;\n\n            // if currently showing an image, fade it out and remove\n            var $toUse = this._$lightboxBodyTwo;\n            var $current = this._$lightboxBodyOne;\n\n            if (this._$lightboxBodyTwo.hasClass('in')) {\n                $toUse = this._$lightboxBodyOne;\n                $current = this._$lightboxBodyTwo;\n            }\n\n            $current.removeClass('in show');\n            setTimeout(function() {\n                if (!_this2._$lightboxBodyTwo.hasClass('in')) _this2._$lightboxBodyTwo.empty();\n                if (!_this2._$lightboxBodyOne.hasClass('in')) _this2._$lightboxBodyOne.empty();\n            }, 500);\n\n            $toUse.addClass('in show');\n            return $toUse;\n        },\n        _handle: function() {\n\n            var $toUse = this._containerToUse();\n            this._updateTitleAndFooter();\n\n            var currentRemote = this._$element.attr('data-remote') || this._$element.attr('data-link') || this._$element.attr('href');\n            var currentType = this._detectRemoteType(currentRemote, this._$element.attr('data-type') || false);\n\n            if (['image', 'youtube', 'vimeo', 'instagram', 'video', 'url'].indexOf(currentType) < 0) return this._error(this._config.strings.type);\n\n            switch (currentType) {\n                case 'image':\n                    this._preloadImage(currentRemote, $toUse);\n                    this._preloadImageByIndex(this._galleryIndex, 3);\n                    break;\n                case 'youtube':\n                    this._showYoutubeVideo(currentRemote, $toUse);\n                    break;\n                case 'vimeo':\n                    this._showVimeoVideo(this._getVimeoId(currentRemote), $toUse);\n                    break;\n                case 'instagram':\n                    this._showInstagramVideo(this._getInstagramId(currentRemote), $toUse);\n                    break;\n                case 'video':\n                    this._showHtml5Video(currentRemote, $toUse);\n                    break;\n                default:\n                    // url\n                    this._loadRemoteContent(currentRemote, $toUse);\n                    break;\n            }\n            return this;\n        },\n        _getYoutubeId: function(string) {\n            if (!string) return false;\n            var matches = string.match(/^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/);\n            return matches && matches[2].length === 11 ? matches[2] : false;\n        },\n        _getVimeoId: function(string) {\n            return string && string.indexOf('vimeo') > 0 ? string : false;\n        },\n        _getInstagramId: function(string) {\n            return string && string.indexOf('instagram') > 0 ? string : false;\n        },\n        _toggleLoading: function(show) {\n            show = show || false;\n            if (show) {\n                this._$modalDialog.css('display', 'none');\n                this._$modal.removeClass('in show');\n                $('.modal-backdrop').append(this._config.loadingMessage);\n            } else {\n                this._$modalDialog.css('display', 'block');\n                this._$modal.addClass('in show');\n                $('.modal-backdrop').find('.ekko-lightbox-loader').remove();\n            }\n            return this;\n        },\n        _calculateBorders: function() {\n            return {\n                top: this._totalCssByAttribute('border-top-width'),\n                right: this._totalCssByAttribute('border-right-width'),\n                bottom: this._totalCssByAttribute('border-bottom-width'),\n                left: this._totalCssByAttribute('border-left-width')\n            };\n        },\n        _calculatePadding: function() {\n            return {\n                top: this._totalCssByAttribute('padding-top'),\n                right: this._totalCssByAttribute('padding-right'),\n                bottom: this._totalCssByAttribute('padding-bottom'),\n                left: this._totalCssByAttribute('padding-left')\n            };\n        },\n        _totalCssByAttribute: function(attribute) {\n            return parseInt(this._$modalDialog.css(attribute), 10) + parseInt(this._$modalContent.css(attribute), 10) + parseInt(this._$modalBody.css(attribute), 10);\n        },\n        _updateTitleAndFooter: function() {\n            var title = this._$element.data('title') || \"\";\n            var caption = this._$element.data('footer') || \"\";\n\n            this._titleIsShown = false;\n            if (title || this._config.alwaysShowClose) {\n                this._titleIsShown = true;\n                this._$modalHeader.css('display', '').find('.modal-title').html(title || \"&nbsp;\");\n            } else this._$modalHeader.css('display', 'none');\n\n            this._footerIsShown = false;\n            if (caption) {\n                this._footerIsShown = true;\n                this._$modalFooter.css('display', '').html(caption);\n            } else this._$modalFooter.css('display', 'none');\n\n            return this;\n        },\n        _showYoutubeVideo: function(remote, $containerForElement) {\n            var id = this._getYoutubeId(remote);\n            var query = remote.indexOf('&') > 0 ? remote.substr(remote.indexOf('&')) : '';\n            var width = this._$element.data('width') || 560;\n            var height = this._$element.data('height') || width / (560 / 315);\n            return this._showVideoIframe('//www.youtube.com/embed/' + id + '?badge=0&autoplay=1&html5=1' + query, width, height, $containerForElement);\n        },\n        _showVimeoVideo: function(id, $containerForElement) {\n            var width = this._$element.data('width') || 500;\n            var height = this._$element.data('height') || width / (560 / 315);\n            return this._showVideoIframe(id + '?autoplay=1', width, height, $containerForElement);\n        },\n        _showInstagramVideo: function(id, $containerForElement) {\n            // instagram load their content into iframe's so this can be put straight into the element\n            var width = this._$element.data('width') || 612;\n            var height = width + 80;\n            id = id.substr(-1) !== '/' ? id + '/' : id; // ensure id has trailing slash\n            $containerForElement.html('<iframe width=\"' + width + '\" height=\"' + height + '\" src=\"' + id + 'embed/\" frameborder=\"0\" allowfullscreen></iframe>');\n            this._resize(width, height);\n            this._config.onContentLoaded.call(this);\n            if (this._$modalArrows) //hide the arrows when showing video\n                this._$modalArrows.css('display', 'none');\n            this._toggleLoading(false);\n            return this;\n        },\n        _showVideoIframe: function(url, width, height, $containerForElement) {\n            // should be used for videos only. for remote content use loadRemoteContent (data-type=url)\n            height = height || width; // default to square\n            $containerForElement.html('<div class=\"embed-responsive embed-responsive-16by9\"><iframe width=\"' + width + '\" height=\"' + height + '\" src=\"' + url + '\" frameborder=\"0\" allowfullscreen class=\"embed-responsive-item\"></iframe></div>');\n            this._resize(width, height);\n            this._config.onContentLoaded.call(this);\n            if (this._$modalArrows) this._$modalArrows.css('display', 'none'); //hide the arrows when showing video\n            this._toggleLoading(false);\n            return this;\n        },\n        _showHtml5Video: function(url, $containerForElement) {\n            // should be used for videos only. for remote content use loadRemoteContent (data-type=url)\n            var width = this._$element.data('width') || 560;\n            var height = this._$element.data('height') || width / (560 / 315);\n            $containerForElement.html('<div class=\"embed-responsive embed-responsive-16by9\"><video width=\"' + width + '\" height=\"' + height + '\" src=\"' + url + '\" preload=\"auto\" autoplay controls class=\"embed-responsive-item\"></video></div>');\n            this._resize(width, height);\n            this._config.onContentLoaded.call(this);\n            if (this._$modalArrows) this._$modalArrows.css('display', 'none'); //hide the arrows when showing video\n            this._toggleLoading(false);\n            return this;\n        },\n        _loadRemoteContent: function(url, $containerForElement) {\n            var _this3 = this;\n\n            var width = this._$element.data('width') || 560;\n            var height = this._$element.data('height') || 560;\n\n            var disableExternalCheck = this._$element.data('disableExternalCheck') || false;\n            this._toggleLoading(false);\n\n            // external urls are loading into an iframe\n            // local ajax can be loaded into the container itself\n            if (!disableExternalCheck && !this._isExternal(url)) {\n                $containerForElement.load(url, $.proxy(function() {\n                    return _this3._$element.trigger('loaded.bs.modal');\n                    l;\n                }));\n            } else {\n                $containerForElement.html('<iframe src=\"' + url + '\" frameborder=\"0\" allowfullscreen></iframe>');\n                this._config.onContentLoaded.call(this);\n            }\n\n            if (this._$modalArrows) //hide the arrows when remote content\n                this._$modalArrows.css('display', 'none');\n\n            this._resize(width, height);\n            return this;\n        },\n        _isExternal: function(url) {\n            var match = url.match(/^([^:\\/?#]+:)?(?:\\/\\/([^\\/?#]*))?([^?#]+)?(\\?[^#]*)?(#.*)?/);\n            if (typeof match[1] === \"string\" && match[1].length > 0 && match[1].toLowerCase() !== location.protocol) return true;\n\n            if (typeof match[2] === \"string\" && match[2].length > 0 && match[2].replace(new RegExp(':(' + ({\n                    \"http:\": 80,\n                    \"https:\": 443\n                })[location.protocol] + ')?$'), \"\") !== location.host) return true;\n\n            return false;\n        },\n        _error: function(message) {\n            console.error(message);\n            this._containerToUse().html(message);\n            this._resize(300, 300);\n            return this;\n\n        },\n        _preloadImageByIndex: function(startIndex, numberOfTimes) {\n            if (!this._$galleryItems) return;\n\n            var next = $(this._$galleryItems.get(startIndex), false);\n            if (typeof next == 'undefined') return;\n\n            var src = next.attr('data-remote') || next.attr('data-link') || next.attr('href');\n            if (next.attr('data-type') === 'image' || this._isImage(src)) this._preloadImage(src, false);\n\n            if (numberOfTimes > 0) return this._preloadImageByIndex(startIndex + 1, numberOfTimes - 1);\n        },\n        _preloadImage: function(src, $containerForImage) {\n            var _this4 = this;\n\n            $containerForImage = $containerForImage || false;\n\n            var img = new Image();\n            if ($containerForImage) {\n                (function() {\n\n                    // if loading takes > 200ms show a loader\n                    var loadingTimeout = setTimeout(function() {\n                        $containerForImage.append(_this4._config.loadingMessage);\n                    }, 200);\n\n                    img.onload = function() {\n                        if (loadingTimeout) clearTimeout(loadingTimeout);\n                        loadingTimeout = null;\n                        var image = $('<img />');\n                        image.attr('src', img.src);\n                        image.addClass('img-fluid');\n\n                        // backward compatibility for bootstrap v3\n                        image.css('width', '100%');\n\n                        $containerForImage.html(image);\n                        if (_this4._$modalArrows) _this4._$modalArrows.css('display', ''); // remove display to default to css property\n\n                        _this4._resize(img.width, img.height);\n                        _this4._toggleLoading(false);\n                        return _this4._config.onContentLoaded.call(_this4);\n                    };\n                    img.onerror = function() {\n                        _this4._toggleLoading(false);\n                        return _this4._error(_this4._config.strings.fail + ('  ' + src));\n                    };\n                })();\n            }\n            img.src = src;\n            return img;\n        },\n        _swipeGesure: function() {\n            if (this._touchendX < this._touchstartX) {\n                return this.navigateRight();\n            }\n            if (this._touchendX > this._touchstartX) {\n                return this.navigateLeft();\n            }\n        },\n        _resize: function(width, height) {\n\n            height = height || width;\n            this._wantedWidth = width;\n            this._wantedHeight = height;\n\n            var imageAspecRatio = width / height;\n\n            // if width > the available space, scale down the expected width and height\n            var widthBorderAndPadding = this._padding.left + this._padding.right + this._border.left + this._border.right;\n\n            // force 10px margin if window size > 575px\n            var addMargin = this._config.doc.body.clientWidth > 575 ? 20 : 0;\n            var discountMargin = this._config.doc.body.clientWidth > 575 ? 0 : 20;\n\n            var maxWidth = Math.min(width + widthBorderAndPadding, this._config.doc.body.clientWidth - addMargin, this._config.maxWidth);\n\n            if (width + widthBorderAndPadding > maxWidth) {\n                height = (maxWidth - widthBorderAndPadding - discountMargin) / imageAspecRatio;\n                width = maxWidth;\n            } else width = width + widthBorderAndPadding;\n\n            var headerHeight = 0,\n                footerHeight = 0;\n\n            // as the resize is performed the modal is show, the calculate might fail\n            // if so, default to the default sizes\n            if (this._footerIsShown) footerHeight = this._$modalFooter.outerHeight(true) || 55;\n\n            if (this._titleIsShown) headerHeight = this._$modalHeader.outerHeight(true) || 67;\n\n            var borderPadding = this._padding.top + this._padding.bottom + this._border.bottom + this._border.top;\n\n            //calculated each time as resizing the window can cause them to change due to Bootstraps fluid margins\n            var margins = parseFloat(this._$modalDialog.css('margin-top')) + parseFloat(this._$modalDialog.css('margin-bottom'));\n\n            var maxHeight = Math.min(height, $(window).height() - borderPadding - margins - headerHeight - footerHeight, this._config.maxHeight - borderPadding - headerHeight - footerHeight);\n\n            if (height > maxHeight) {\n                // if height > the available height, scale down the width\n                width = Math.ceil(maxHeight * imageAspecRatio) + widthBorderAndPadding;\n            }\n\n            this._$lightboxContainer.css('height', maxHeight);\n            this._$modalDialog.css('flex', 1).css('maxWidth', width);\n\n            var modal = this._$modal.data('bs.modal');\n            if (modal) {\n                // v4 method is mistakenly protected\n                try {\n                    modal._handleUpdate();\n                } catch (Exception) {\n                    modal.handleUpdate();\n                }\n            }\n            return this;\n        },\n        _jQueryInterface: function(config) {\n            var _this5 = this;\n\n            config = config || {};\n            return this.each(function() {\n                var $this = $(_this5);\n                var _config = $.extend({}, Lightbox.Default, $this.data(), typeof config === 'object' && config);\n\n                new Lightbox(_this5, _config);\n            });\n        }\n    });\n\n    Lightbox.DEFAULTS = {\n        title: '',\n        footer: '',\n        maxWidth: 9999,\n        maxHeight: 9999,\n        showArrows: true, //display the left / right arrows or not\n        wrapping: true, //if true, gallery loops infinitely\n        type: null, //force the lightbox into image / youtube mode. if null, or not image|youtube|vimeo; detect it\n        alwaysShowClose: false, //always show the close button, even if there is no title\n        loadingMessage: '<div class=\"ekko-lightbox-loader\"><div><div></div><div></div></div></div>', // http://tobiasahlin.com/spinkit/\n        leftArrow: '<span>&#10094;</span>',\n        rightArrow: '<span>&#10095;</span>',\n        strings: {\n            close: 'Close',\n            fail: 'Failed to load image:',\n            type: 'Could not detect remote target type. Force the type using data-type'\n        },\n        doc: document, // if in an iframe can specify top.document\n        onShow: function onShow() {},\n        onShown: function onShown() {},\n        onHide: function onHide() {},\n        onHidden: function onHidden() {},\n        onNavigate: function onNavigate() {},\n        onContentLoaded: function onContentLoaded() {}\n    };\n\n    // LIGHTBOX PLUGIN DEFINITION\n    // ==========================\n\n    function Plugin(option) {\n        return this.each(function() {\n            var $this = $(this)\n            var wgt = $this.data('bs.lightbox')\n            var options = langx.mixin({}, Lightbox.DEFAULTS, $this.data(), typeof option == 'object' && option)\n            var action = typeof option == 'string' ? option : options.slide\n\n            if (!wgt) {\n                $this.data('bs.lightbox', (wgt = new Lightbox(this, options)));\n            } else {\n                wgt.modal().modal('show');\n                if (typeof option == 'number') {\n                    wgt.navigateTo(option);\n                } else if (action) {\n                    wgt[action]()\n                }\n            }\n        });\n    }\n\n    var old = $.fn.lightbox\n\n    $.fn.lightbox = Plugin\n    $.fn.lightbox.Constructor = Lightbox\n\n\n    // LIGHTBOX NO CONFLICT\n    // ====================\n\n    $.fn.lightbox.noConflict = function() {\n        $.fn.lightbox = old\n        return this\n    }\n    return $.fn.lightbox;\n});"]}