{"version":3,"sources":["combobox.js"],"names":["define","langx","browser","eventer","noder","geom","velm","$","sbswt","old","fn","combobox","Combobox","WidgetBase","inherit","klassName","init","element","options","this","$element","mixin","defaults","$dropMenu","find","$input","$button","dropdown","$inputGroupBtn","on","proxy","itemclicked","inputchanged","menuShown","keypress","setDefaultSelection","items","children","length","addClass","filterOnKeypress","filter","val","destroy","remove","each","attr","outerHTML","doSelect","$item","removeClass","$selectedItem","text","trim","clearSelection","autoResizeMenu","resizeMenu","width","outerWidth","selectedItem","item","data","txt","notFound","selectByText","textContent","innerText","toLowerCase","selectByValue","value","selector","selectBySelector","selectByIndex","index","removeData","removeAttr","enable","disable","e","target","parent","trigger","synthetic","preventDefault","focus","ENTER","ESC","LEFT","UP","RIGHT","DOWN","IS_NAVIGATIONAL","which","showOptionsOnKeypress","hasClass","selected","$selected","next","prev","previousKeyPress","extra","prototype","getValue","option","methodReturn","args","Array","slice","call","arguments","$set","$this","apply","undefined","list","predicate","self","visible","i","$li","substr","append","Constructor","noConflict"],"mappings":"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","file":"../combobox.js","sourcesContent":["define([\n  \"skylark-utils/langx\",\n  \"skylark-utils/browser\",\n  \"skylark-utils/eventer\",\n  \"skylark-utils/noder\",\n  \"skylark-utils/geom\",\n  \"skylark-utils/velm\",\n  \"skylark-utils/query\",\n  \"./sbswt\"\n],function(langx,browser,eventer,noder,geom,velm,$,sbswt){\n\n\n\t/*\n\t * Fuel UX Checkbox\n\t * https://github.com/ExactTarget/fuelux\n\t *\n\t * Copyright (c) 2014 ExactTarget\n\t * Licensed under the BSD New license.\n\t */\n\n\tvar old = $.fn.combobox;\n\n\n\t// COMBOBOX CONSTRUCTOR AND PROTOTYPE\n\n\tvar Combobox = sbswt.Combobox = sbswt.WidgetBase.inherit({\n\t\tklassName: \"Combobox\",\n\n\t\tinit : function(element,options) {\n\t\t\tthis.$element = $(element);\n\t\t\tthis.options = langx.mixin({}, $.fn.combobox.defaults, options);\n\n\t\t\tthis.$dropMenu = this.$element.find('.dropdown-menu');\n\t\t\tthis.$input = this.$element.find('input');\n\t\t\tthis.$button = this.$element.find('.btn');\n\t\t\tthis.$button.dropdown();\n\t\t\tthis.$inputGroupBtn = this.$element.find('.input-group-btn');\n\n\t\t\tthis.$element.on('click.fu.combobox', 'a', langx.proxy(this.itemclicked, this));\n\t\t\tthis.$element.on('change.fu.combobox', 'input', langx.proxy(this.inputchanged, this));\n\t\t\tthis.$element.on('shown.bs.dropdown', langx.proxy(this.menuShown, this));\n\t\t\tthis.$input.on('keyup.fu.combobox', langx.proxy(this.keypress, this));\n\n\t\t\t// set default selection\n\t\t\tthis.setDefaultSelection();\n\n\t\t\t// if dropdown is empty, disable it\n\t\t\tvar items = this.$dropMenu.children('li');\n\t\t\tif( items.length === 0) {\n\t\t\t\tthis.$button.addClass('disabled');\n\t\t\t}\n\n\t\t\t// filter on load in case the first thing they do is press navigational key to pop open the menu\n\t\t\tif (this.options.filterOnKeypress) {\n\t\t\t\tthis.options.filter(this.$dropMenu.find('li'), this.$input.val(), this);\n\t\t\t}\n\t\t},\n\n\t\tdestroy: function () {\n\t\t\tthis.$element.remove();\n\t\t\t// remove any external bindings\n\t\t\t// [none]\n\n\t\t\t// set input value attrbute in markup\n\t\t\tthis.$element.find('input').each(function () {\n\t\t\t\t$(this).attr('value', $(this).val());\n\t\t\t});\n\n\t\t\t// empty elements to return to original markup\n\t\t\t// [none]\n\n\t\t\treturn this.$element[0].outerHTML;\n\t\t},\n\n\t\tdoSelect: function ($item) {\n\n\t\t\tif (typeof $item[0] !== 'undefined') {\n\t\t\t\t// remove selection from old item, may result in remove and\n\t\t\t\t// re-addition of class if item is the same\n\t\t\t\tthis.$element.find('li.selected:first').removeClass('selected');\n\n\t\t\t\t// add selection to new item\n\t\t\t\tthis.$selectedItem = $item;\n\t\t\t\tthis.$selectedItem.addClass('selected');\n\n\t\t\t\t// update input\n\t\t\t\tthis.$input.val(this.$selectedItem.text().trim());\n\t\t\t} else {\n\t\t\t\t// this is a custom input, not in the menu\n\t\t\t\tthis.$selectedItem = null;\n\t\t\t\tthis.$element.find('li.selected:first').removeClass('selected');\n\t\t\t}\n\t\t},\n\n\t\tclearSelection: function () {\n\t\t\tthis.$selectedItem = null;\n\t\t\tthis.$input.val('');\n\t\t\tthis.$dropMenu.find('li').removeClass('selected');\n\t\t},\n\n\t\tmenuShown: function () {\n\t\t\tif (this.options.autoResizeMenu) {\n\t\t\t\tthis.resizeMenu();\n\t\t\t}\n\t\t},\n\n\t\tresizeMenu: function () {\n\t\t\tvar width = this.$element.outerWidth();\n\t\t\tthis.$dropMenu.outerWidth(width);\n\t\t},\n\n\t\tselectedItem: function () {\n\t\t\tvar item = this.$selectedItem;\n\t\t\tvar data = {};\n\n\t\t\tif (item) {\n\t\t\t\tvar txt = this.$selectedItem.text().trim();\n\t\t\t\tdata = langx.mixin({\n\t\t\t\t\ttext: txt\n\t\t\t\t}, this.$selectedItem.data());\n\t\t\t} else {\n\t\t\t\tdata = {\n\t\t\t\t\ttext: this.$input.val().trim(),\n\t\t\t\t\tnotFound: true\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn data;\n\t\t},\n\n\t\tselectByText: function (text) {\n\t\t\tvar $item = $([]);\n\t\t\tthis.$element.find('li').each(function () {\n\t\t\t\tif ((this.textContent || this.innerText || $(this).text() || '').trim().toLowerCase() === (text || '').trim().toLowerCase()) {\n\t\t\t\t\t$item = $(this);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.doSelect($item);\n\t\t},\n\n\t\tselectByValue: function (value) {\n\t\t\tvar selector = 'li[data-value=\"' + value + '\"]';\n\t\t\tthis.selectBySelector(selector);\n\t\t},\n\n\t\tselectByIndex: function (index) {\n\t\t\t// zero-based index\n\t\t\tvar selector = 'li:eq(' + index + ')';\n\t\t\tthis.selectBySelector(selector);\n\t\t},\n\n\t\tselectBySelector: function (selector) {\n\t\t\tvar $item = this.$element.find(selector);\n\t\t\tthis.doSelect($item);\n\t\t},\n\n\t\tsetDefaultSelection: function () {\n\t\t\tvar selector = 'li[data-selected=true]:first';\n\t\t\tvar item = this.$element.find(selector);\n\n\t\t\tif (item.length > 0) {\n\t\t\t\t// select by data-attribute\n\t\t\t\tthis.selectBySelector(selector);\n\t\t\t\titem.removeData('selected');\n\t\t\t\titem.removeAttr('data-selected');\n\t\t\t}\n\t\t},\n\n\t\tenable: function () {\n\t\t\tthis.$element.removeClass('disabled');\n\t\t\tthis.$input.removeAttr('disabled');\n\t\t\tthis.$button.removeClass('disabled');\n\t\t},\n\n\t\tdisable: function () {\n\t\t\tthis.$element.addClass('disabled');\n\t\t\tthis.$input.attr('disabled', true);\n\t\t\tthis.$button.addClass('disabled');\n\t\t},\n\n\t\titemclicked: function (e) {\n\t\t\tthis.$selectedItem = $(e.target).parent();\n\n\t\t\t// set input text and trigger input change event marked as synthetic\n\t\t\tthis.$input.val(this.$selectedItem.text().trim()).trigger('change', {\n\t\t\t\tsynthetic: true\n\t\t\t});\n\n\t\t\t// pass object including text and any data-attributes\n\t\t\t// to onchange event\n\t\t\tvar data = this.selectedItem();\n\n\t\t\t// trigger changed event\n\t\t\tthis.$element.trigger('changed.fu.combobox', data);\n\n\t\t\te.preventDefault();\n\n\t\t\t// return focus to control after selecting an option\n\t\t\tthis.$element.find('.dropdown-toggle').focus();\n\t\t},\n\n\t\tkeypress: function (e) {\n\t\t\tvar ENTER = 13;\n\t\t\t//var TAB = 9;\n\t\t\tvar ESC = 27;\n\t\t\tvar LEFT = 37;\n\t\t\tvar UP = 38;\n\t\t\tvar RIGHT = 39;\n\t\t\tvar DOWN = 40;\n\n\t\t\tvar IS_NAVIGATIONAL = (\n\t\t\t\te.which === UP ||\n\t\t\t\te.which === DOWN ||\n\t\t\t\te.which === LEFT ||\n\t\t\t\te.which === RIGHT\n\t\t\t);\n\n\t\t\tif(this.options.showOptionsOnKeypress && !this.$inputGroupBtn.hasClass('open')){\n\t\t\t\tthis.$button.dropdown('toggle');\n\t\t\t\tthis.$input.focus();\n\t\t\t}\n\n\t\t\tif (e.which === ENTER) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tvar selected = this.$dropMenu.find('li.selected').text().trim();\n\t\t\t\tif(selected.length > 0){\n\t\t\t\t\tthis.selectByText(selected);\n\t\t\t\t}else{\n\t\t\t\t\tthis.selectByText(this.$input.val());\n\t\t\t\t}\n\n\t\t\t\tthis.$inputGroupBtn.removeClass('open');\n\t\t\t} else if (e.which === ESC) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.clearSelection();\n\t\t\t\tthis.$inputGroupBtn.removeClass('open');\n\t\t\t} else if (this.options.showOptionsOnKeypress) {\n\t\t\t\tif (e.which === DOWN || e.which === UP) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar $selected = this.$dropMenu.find('li.selected');\n\t\t\t\t\tif ($selected.length > 0) {\n\t\t\t\t\t\tif (e.which === DOWN) {\n\t\t\t\t\t\t\t$selected = $selected.next(':not(.hidden)');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$selected = $selected.prev(':not(.hidden)');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ($selected.length === 0){\n\t\t\t\t\t\tif (e.which === DOWN) {\n\t\t\t\t\t\t\t$selected = this.$dropMenu.find('li:not(.hidden):first');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$selected = this.$dropMenu.find('li:not(.hidden):last');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.doSelect($selected);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Avoid filtering on navigation key presses\n\t\t\tif (this.options.filterOnKeypress && !IS_NAVIGATIONAL) {\n\t\t\t\tthis.options.filter(this.$dropMenu.find('li'), this.$input.val(), this);\n\t\t\t}\n\n\t\t\tthis.previousKeyPress = e.which;\n\t\t},\n\n\t\tinputchanged: function (e, extra) {\n\t\t\tvar val = $(e.target).val();\n\t\t\t// skip processing for internally-generated synthetic event\n\t\t\t// to avoid double processing\n\t\t\tif (extra && extra.synthetic) {\n\t\t\t\tthis.selectByText(val);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.selectByText(val);\n\n\t\t\t// find match based on input\n\t\t\t// if no match, pass the input value\n\t\t\tvar data = this.selectedItem();\n\t\t\tif (data.text.length === 0) {\n\t\t\t\tdata = {\n\t\t\t\t\ttext: val\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// trigger changed event\n\t\t\tthis.$element.trigger('changed.fu.combobox', data);\n\t\t}\n\n\t});\n\n\n\n\tCombobox.prototype.getValue = Combobox.prototype.selectedItem;\n\n\t// COMBOBOX PLUGIN DEFINITION\n\n\t$.fn.combobox = function (option) {\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\tvar methodReturn;\n\n\t\tvar $set = this.each(function () {\n\t\t\tvar $this = $(this);\n\t\t\tvar data = $this.data('fu.combobox');\n\t\t\tvar options = typeof option === 'object' && option;\n\n\t\t\tif (!data) {\n\t\t\t\t$this.data('fu.combobox', (data = new Combobox(this, options)));\n\t\t\t}\n\n\t\t\tif (typeof option === 'string') {\n\t\t\t\tmethodReturn = data[option].apply(data, args);\n\t\t\t}\n\t\t});\n\n\t\treturn (methodReturn === undefined) ? $set : methodReturn;\n\t};\n\n\t$.fn.combobox.defaults = {\n\n\t\tautoResizeMenu: true,\n\t\tfilterOnKeypress: false,\n\t\tshowOptionsOnKeypress: false,\n\t\tfilter: function filter (list, predicate, self) {\n\t\t\tvar visible = 0;\n\t\t\tself.$dropMenu.find('.empty-indicator').remove();\n\n\t\t\tlist.each(function (i) {\n\t\t\t\tvar $li = $(this);\n\t\t\t\tvar text = $(this).text().trim();\n\n\t\t\t\t$li.removeClass();\n\n\t\t\t\tif (text === predicate) {\n\t\t\t\t\t$li.addClass('text-success');\n\t\t\t\t\tvisible++;\n\t\t\t\t} else if (text.substr(0, predicate.length) === predicate) {\n\t\t\t\t\t$li.addClass('text-info');\n\t\t\t\t\tvisible++;\n\t\t\t\t} else {\n\t\t\t\t\t$li.addClass('hidden');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (visible === 0) {\n\t\t\t\tself.$dropMenu.append('<li class=\"empty-indicator text-muted\"><em>No Matches</em></li>');\n\t\t\t}\n\t\t}\n\t};\n\n\t$.fn.combobox.Constructor =  Combobox;\n\n\t$.fn.combobox.noConflict = function () {\n\t\t$.fn.combobox = old;\n\t\treturn this;\n\t};\n\n\t// DATA-API\n\n\t/*\n\n\t$(document).on('mousedown.fu.combobox.data-api', '[data-initialize=combobox]', function (e) {\n\t\tvar $control = $(e.target).closest('.combobox');\n\t\tif (!$control.data('fu.combobox')) {\n\t\t\t$control.combobox($control.data());\n\t\t}\n\t});\n\n\t// Must be domReady for AMD compatibility\n\t$(function () {\n\t\t$('[data-initialize=combobox]').each(function () {\n\t\t\tvar $this = $(this);\n\t\t\tif (!$this.data('fu.combobox')) {\n\t\t\t\t$this.combobox($this.data());\n\t\t\t}\n\t\t});\n\t});\n\t*/\n\n\treturn $.fn.combobox;\n});\n"]}