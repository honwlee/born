{"version":3,"sources":["carousel.js"],"names":["define","langx","browser","eventer","noder","geom","velm","$","sbswt","Plugin","option","this","each","$this","wgt","data","options","mixin","Carousel","DEFAULTS","action","slide","to","interval","pause","cycle","WidgetBase","inherit","klassName","init","element","$element","$indicators","find","paused","sliding","$active","$items","keyboard","on","proxy","keydown","document","documentElement","e","href","$target","attr","replace","hasClass","slideIndex","call","preventDefault","VERSION","TRANSITION_DURATION","wrap","prototype","test","target","tagName","which","prev","next","clearInterval","setInterval","getItemIndex","item","parent","children","index","getItemForDirection","direction","active","activeIndex","willWrap","length","delta","itemIndex","eq","pos","that","one","support","transition","trigger","end","type","$next","isCycling","relatedTarget","slideEvent","create","isDefaultPrevented","removeClass","$nextIndicator","addClass","slidEvent","offsetWidth","join","setTimeout","emulateTransitionEnd","old","fn","carousel","Constructor","noConflict"],"mappings":"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","file":"../carousel.js","sourcesContent":["define([\n    \"skylark-utils/langx\",\n    \"skylark-utils/browser\",\n    \"skylark-utils/eventer\",\n    \"skylark-utils/noder\",\n    \"skylark-utils/geom\",\n    \"skylark-utils/velm\",\n    \"skylark-utils/query\",\n    \"./sbswt\"\n], function(langx, browser, eventer, noder, geom, velm, $, sbswt) {\n\n    /* ========================================================================\n     * Bootstrap: carousel.js v3.3.7\n     * http://getbootstrap.com/javascript/#carousel\n     * ========================================================================\n     * Copyright 2011-2016 Twitter, Inc.\n     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n     * ======================================================================== */\n\n    'use strict';\n\n    // CAROUSEL CLASS DEFINITION\n    // =========================\n\n    var Carousel = sbswt.Carousel = sbswt.WidgetBase.inherit({\n        klassName: \"Carousel\",\n\n        init: function(element, options) {\n            this.$element = $(element)\n            this.$indicators = this.$element.find('.carousel-indicators')\n            this.options = options\n            this.paused = null\n            this.sliding = null\n            this.interval = null\n            this.$active = null\n            this.$items = null\n\n            this.options.keyboard && this.$element.on('keydown.bs.carousel', langx.proxy(this.keydown, this))\n\n            this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element\n                .on('mouseenter.bs.carousel', langx.proxy(this.pause, this))\n                .on('mouseleave.bs.carousel', langx.proxy(this.cycle, this));\n\n            this.$element.on(\"click.bs.carousel.data-api\", \"[data-slide],[data-slide-to]\", function(e) {\n                var href\n                var $this = $(this)\n                var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) // strip for ie7\n                if (!$target.hasClass('carousel')) return\n                var options = langx.mixin({}, $target.data(), $this.data());\n                var slideIndex = $this.attr('data-slide-to')\n                if (slideIndex) options.interval = false\n\n                Plugin.call($target, options);\n\n                if (slideIndex) {\n                    $target.data('bs.carousel').to(slideIndex);\n                }\n\n                e.preventDefault();\n\n            });\n        }\n    });\n\n    // var Carousel = function (element, options) {\n    // }\n\n    Carousel.VERSION = '3.3.7'\n\n    Carousel.TRANSITION_DURATION = 600\n\n    Carousel.DEFAULTS = {\n        interval: 5000,\n        pause: 'hover',\n        wrap: true,\n        keyboard: true\n    }\n\n    Carousel.prototype.keydown = function(e) {\n        if (/input|textarea/i.test(e.target.tagName)) return\n        switch (e.which) {\n            case 37:\n                this.prev();\n                break\n            case 39:\n                this.next();\n                break\n            default:\n                return\n        }\n\n        e.preventDefault()\n    }\n\n    Carousel.prototype.cycle = function(e) {\n        e || (this.paused = false)\n\n        this.interval && clearInterval(this.interval)\n\n        this.options.interval &&\n            !this.paused &&\n            (this.interval = setInterval(langx.proxy(this.next, this), this.options.interval))\n\n        return this\n    }\n\n    Carousel.prototype.getItemIndex = function(item) {\n        this.$items = item.parent().children('.item')\n        return this.$items.index(item || this.$active)\n    }\n\n    Carousel.prototype.getItemForDirection = function(direction, active) {\n        var activeIndex = this.getItemIndex(active)\n        var willWrap = (direction == 'prev' && activeIndex === 0) ||\n            (direction == 'next' && activeIndex == (this.$items.length - 1))\n        if (willWrap && !this.options.wrap) return active\n        var delta = direction == 'prev' ? -1 : 1\n        var itemIndex = (activeIndex + delta) % this.$items.length\n        return this.$items.eq(itemIndex)\n    }\n\n    Carousel.prototype.to = function(pos) {\n        var that = this\n        var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))\n\n        if (pos > (this.$items.length - 1) || pos < 0) return\n\n        if (this.sliding) return this.$element.one('slid.bs.carousel', function() { that.to(pos) }) // yes, \"slid\"\n        if (activeIndex == pos) return this.pause().cycle()\n\n        return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))\n    }\n\n    Carousel.prototype.pause = function(e) {\n        e || (this.paused = true)\n\n        if (this.$element.find('.next, .prev').length && browser.support.transition) {\n            this.$element.trigger(browser.support.transition.end)\n            this.cycle(true)\n        }\n\n        this.interval = clearInterval(this.interval)\n\n        return this\n    }\n\n    Carousel.prototype.next = function() {\n        if (this.sliding) return\n        return this.slide('next')\n    }\n\n    Carousel.prototype.prev = function() {\n        if (this.sliding) return\n        return this.slide('prev')\n    }\n\n    Carousel.prototype.slide = function(type, next) {\n        var $active = this.$element.find('.item.active')\n        var $next = next || this.getItemForDirection(type, $active)\n        var isCycling = this.interval\n        var direction = type == 'next' ? 'left' : 'right'\n        var that = this\n\n        if ($next.hasClass('active')) return (this.sliding = false)\n\n        var relatedTarget = $next[0]\n        var slideEvent = eventer.create('slide.bs.carousel', {\n            relatedTarget: relatedTarget,\n            direction: direction\n        })\n        this.$element.trigger(slideEvent)\n        if (slideEvent.isDefaultPrevented()) return\n\n        this.sliding = true\n\n        isCycling && this.pause()\n\n        if (this.$indicators.length) {\n            this.$indicators.find('.active').removeClass('active')\n            var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])\n            $nextIndicator && $nextIndicator.addClass('active')\n        }\n\n        var slidEvent = eventer.create('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, \"slid\"\n        if (browser.support.transition && this.$element.hasClass('slide')) {\n            $next.addClass(type)\n            $next[0].offsetWidth // force reflow\n            $active.addClass(direction)\n            $next.addClass(direction)\n            $active\n                .one('bsTransitionEnd', function() {\n                    $next.removeClass([type, direction].join(' ')).addClass('active')\n                    $active.removeClass(['active', direction].join(' '))\n                    that.sliding = false\n                    setTimeout(function() {\n                        that.$element.trigger(slidEvent)\n                    }, 0)\n                })\n                .emulateTransitionEnd(Carousel.TRANSITION_DURATION)\n        } else {\n            $active.removeClass('active')\n            $next.addClass('active')\n            this.sliding = false\n            this.$element.trigger(slidEvent)\n        }\n\n        isCycling && this.cycle()\n\n        return this\n    }\n\n\n    // CAROUSEL PLUGIN DEFINITION\n    // ==========================\n\n    function Plugin(option) {\n        return this.each(function() {\n            var $this = $(this)\n            var wgt = $this.data('bs.carousel')\n            var options = langx.mixin({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)\n            var action = typeof option == 'string' ? option : options.slide\n\n            if (!wgt) {\n                $this.data('bs.carousel', (wgt = new Carousel(this, options)));\n            }\n            if (typeof option == 'number') {\n                wgt.to(option);\n            } else if (action) {\n                wgt[action]()\n            } else if (options.interval) {\n                wgt.pause().cycle();\n            }\n        })\n    }\n\n    var old = $.fn.carousel\n\n    $.fn.carousel = Plugin\n    $.fn.carousel.Constructor = Carousel\n\n\n    // CAROUSEL NO CONFLICT\n    // ====================\n\n    $.fn.carousel.noConflict = function() {\n        $.fn.carousel = old\n        return this\n    }\n\n\n    // CAROUSEL DATA-API\n    // =================\n    /*\n    var clickHandler = function (e) {\n      var href\n      var $this   = $(this)\n      var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) // strip for ie7\n      if (!$target.hasClass('carousel')) return\n      var options = langx.mixin({}, $target.data(), $this.data())\n      var slideIndex = $this.attr('data-slide-to')\n      if (slideIndex) options.interval = false\n\n      Plugin.call($target, options)\n\n      if (slideIndex) {\n        $target.data('bs.carousel').to(slideIndex)\n      }\n\n      e.preventDefault()\n    }\n\n    $(document)\n      .on('click.bs.carousel.data-api', '[data-slide]', clickHandler)\n      .on('click.bs.carousel.data-api', '[data-slide-to]', clickHandler)\n\n    $(window).on('load', function () {\n      $('[data-ride=\"carousel\"]').each(function () {\n        var $carousel = $(this)\n        Plugin.call($carousel, $carousel.data())\n      })\n    })\n    */\n\n    return $.fn.carousel;\n\n});"]}