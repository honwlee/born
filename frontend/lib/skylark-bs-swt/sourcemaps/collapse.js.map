{"version":3,"sources":["collapse.js"],"names":["define","langx","browser","eventer","noder","geom","velm","$","sbswt","getTargetFromTrigger","$trigger","href","target","attr","replace","Plugin","option","this","each","$this","data","options","mixin","Collapse","DEFAULTS","toggle","test","WidgetBase","inherit","klassName","init","element","$element","id","transitioning","parent","$parent","getParent","addAriaAndCollapsedClass","on","e","preventDefault","$target","call","dimension","hasWidth","hasClass","show","activesData","actives","children","length","startEvent","create","trigger","isDefaultPrevented","removeClass","addClass","complete","support","transition","scrollSize","camelCase","join","one","proxy","emulateTransitionEnd","TRANSITION_DURATION","hide","offsetHeight","find","i","end","isOpen","toggleClass","VERSION","old","fn","collapse","Constructor","noConflict"],"mappings":"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","file":"../collapse.js","sourcesContent":["define([\n  \"skylark-utils/langx\",\n  \"skylark-utils/browser\",\n  \"skylark-utils/eventer\",\n  \"skylark-utils/noder\",\n  \"skylark-utils/geom\",\n  \"skylark-utils/velm\",\n  \"skylark-utils/query\",\n  \"./sbswt\"\n],function(langx,browser,eventer,noder,geom,velm,$,sbswt){\n\n/* ========================================================================\n * Bootstrap: collapse.js v3.3.7\n * http://getbootstrap.com/javascript/#collapse\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n/* jshint latedef: false */\n\n  'use strict';\n\n  // COLLAPSE PUBLIC CLASS DEFINITION\n  // ================================\n\n  var Collapse = sbswt.Collapse = sbswt.WidgetBase.inherit({\n    klassName: \"Collapse\",\n\n    init : function(element,options) {\n      this.$element      = $(element)\n      this.options       = langx.mixin({}, Collapse.DEFAULTS, options)\n      this.$trigger      = $('[data-toggle=\"collapse\"][href=\"#' + element.id + '\"],' +\n                             '[data-toggle=\"collapse\"][data-target=\"#' + element.id + '\"]')\n      this.transitioning = null\n\n      if (this.options.parent) {\n        this.$parent = this.getParent()\n      } else {\n        this.addAriaAndCollapsedClass(this.$element, this.$trigger)\n      }\n\n      if (this.options.toggle) {\n        this.toggle();\n      }\n\n      this.$element.on('click.bs.collapse.data-api', '[data-toggle=\"collapse\"]', function (e) {\n        var $this   = $(this)\n\n        if (!$this.attr('data-target')) {\n          e.preventDefault();\n        }\n\n        var $target = getTargetFromTrigger($this);\n        var data    = $target.data('bs.collapse');\n        var option  = data ? 'toggle' : $this.data();\n\n        Plugin.call($target, option);\n      })\n    },\n\n    dimension : function () {\n      var hasWidth = this.$element.hasClass('width')\n      return hasWidth ? 'width' : 'height'\n    },\n\n    show : function () {\n      if (this.transitioning || this.$element.hasClass('in')) return\n\n      var activesData\n      var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')\n\n      if (actives && actives.length) {\n        activesData = actives.data('bs.collapse')\n        if (activesData && activesData.transitioning) return\n      }\n\n      var startEvent = eventer.create('show.bs.collapse')\n      this.$element.trigger(startEvent)\n      if (startEvent.isDefaultPrevented()) return\n\n      if (actives && actives.length) {\n        Plugin.call(actives, 'hide')\n        activesData || actives.data('bs.collapse', null)\n      }\n\n      var dimension = this.dimension()\n\n      this.$element\n        .removeClass('collapse')\n        .addClass('collapsing')[dimension](0)\n        .attr('aria-expanded', true)\n\n      this.$trigger\n        .removeClass('collapsed')\n        .attr('aria-expanded', true)\n\n      this.transitioning = 1\n\n      var complete = function () {\n        this.$element\n          .removeClass('collapsing')\n          .addClass('collapse in')[dimension]('')\n        this.transitioning = 0\n        this.$element\n          .trigger('shown.bs.collapse')\n      }\n\n      if (!browser.support.transition) return complete.call(this)\n\n      var scrollSize = langx.camelCase(['scroll', dimension].join('-'))\n\n      this.$element\n        .one('bsTransitionEnd', langx.proxy(complete, this))\n        .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])\n    },\n\n    hide : function () {\n      if (this.transitioning || !this.$element.hasClass('in')) return\n\n      var startEvent = eventer.create('hide.bs.collapse')\n      this.$element.trigger(startEvent)\n      if (startEvent.isDefaultPrevented()) return\n\n      var dimension = this.dimension()\n\n      this.$element[dimension](this.$element[dimension]())[0].offsetHeight\n\n      this.$element\n        .addClass('collapsing')\n        .removeClass('collapse in')\n        .attr('aria-expanded', false)\n\n      this.$trigger\n        .addClass('collapsed')\n        .attr('aria-expanded', false)\n\n      this.transitioning = 1\n\n      var complete = function () {\n        this.transitioning = 0\n        this.$element\n          .removeClass('collapsing')\n          .addClass('collapse')\n          .trigger('hidden.bs.collapse')\n      }\n\n      if (!browser.support.transition) return complete.call(this)\n\n      this.$element\n        [dimension](0)\n        .one('bsTransitionEnd', langx.proxy(complete, this))\n        .emulateTransitionEnd(Collapse.TRANSITION_DURATION)\n    },\n\n    toggle : function () {\n      this[this.$element.hasClass('in') ? 'hide' : 'show']()\n    },\n\n    getParent : function () {\n      return $(this.options.parent)\n        .find('[data-toggle=\"collapse\"][data-parent=\"' + this.options.parent + '\"]')\n        .each(langx.proxy(function (i, element) {\n          var $element = $(element)\n          this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)\n        }, this))\n        .end()\n    },\n\n    addAriaAndCollapsedClass : function ($element, $trigger) {\n      var isOpen = $element.hasClass('in')\n\n      $element.attr('aria-expanded', isOpen)\n      $trigger\n        .toggleClass('collapsed', !isOpen)\n        .attr('aria-expanded', isOpen)\n    }\n\n  });\n\n  Collapse.VERSION  = '3.3.7'\n\n  Collapse.TRANSITION_DURATION = 350\n\n  Collapse.DEFAULTS = {\n    toggle: true\n  }\n\n\n  function getTargetFromTrigger($trigger) {\n    var href\n    var target = $trigger.attr('data-target')\n      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '') // strip for ie7\n\n    return $(target)\n  }\n\n\n  // COLLAPSE PLUGIN DEFINITION\n  // ==========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.collapse')\n      var options = langx.mixin({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)\n\n      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false\n      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.collapse\n\n  $.fn.collapse             = Plugin;\n  $.fn.collapse.Constructor = Collapse;\n\n  // COLLAPSE NO CONFLICT\n  // ====================\n\n  $.fn.collapse.noConflict = function () {\n    $.fn.collapse = old\n    return this\n  }\n\n\n  // COLLAPSE DATA-API\n  // =================\n  /*\n  $(document).on('click.bs.collapse.data-api', '[data-toggle=\"collapse\"]', function (e) {\n    var $this   = $(this)\n\n    if (!$this.attr('data-target')) e.preventDefault()\n\n    var $target = getTargetFromTrigger($this)\n    var data    = $target.data('bs.collapse')\n    var option  = data ? 'toggle' : $this.data()\n\n    Plugin.call($target, option)\n  })\n*/\n\n  return $.fn.collapse;\n\n});\n"]}