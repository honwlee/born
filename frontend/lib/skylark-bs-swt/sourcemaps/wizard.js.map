{"version":3,"sources":["wizard.js"],"names":["define","langx","browser","eventer","noder","geom","velm","$","sbswt","old","fn","wizard","Wizard","WidgetBase","inherit","klassName","init","element","options","this","$element","mixin","defaults","disablePreviousStep","attr","currentStep","selectedItem","step","numSteps","find","length","$prevBtn","$nextBtn","kids","children","detach","nextText","trim","text","append","steps","addClass","window","console","warn","on","proxy","previous","next","stepclicked","destroy","remove","outerHTML","addSteps","index","i","l","$pane","$startPane","$startStep","$step","items","slice","call","arguments","$steps","$stepContent","Array","label","badge","pane","before","syncSteps","setState","removeSteps","howMany","$start","action","undefined","prev","each","item","canMovePrev","isFirstStep","isLastStep","last","lastText","removeClass","prevSelector","$prevSteps","currentSelector","$currentStep","target","first","totalWidth","outerWidth","containerWidth","width","newMargin","position","left","e","create","trigger","initialized","li","currentTarget","evt","isDefaultPrevented","isNaN","parseInt","html","direction","is","firstFormField","focus","retVal","Number","stepname","option","methodReturn","args","prototype","$set","$this","data","apply","Constructor","noConflict"],"mappings":"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","file":"../wizard.js","sourcesContent":["define([\n  \"skylark-utils/langx\",\n  \"skylark-utils/browser\",\n  \"skylark-utils/eventer\",\n  \"skylark-utils/noder\",\n  \"skylark-utils/geom\",\n  \"skylark-utils/velm\",\n  \"skylark-utils/query\",\n  \"./sbswt\"\n],function(langx,browser,eventer,noder,geom,velm,$,sbswt){\n\n\t/*\n\t * Fuel UX Checkbox\n\t * https://github.com/ExactTarget/fuelux\n\t *\n\t * Copyright (c) 2014 ExactTarget\n\t * Licensed under the BSD New license.\n\t */\n\n\tvar old = $.fn.wizard;\n\n\t// WIZARD CONSTRUCTOR AND PROTOTYPE\n\n\tvar Wizard = sbswt.Wizard = sbswt.WidgetBase.inherit({\n\t\tklassName: \"Wizard\",\n\n\t\tinit : function(element,options) {\n\t\t\tthis.$element = $(element);\n\t\t\tthis.options = langx.mixin({}, $.fn.wizard.defaults, options);\n\t\t\tthis.options.disablePreviousStep = (this.$element.attr('data-restrict') === 'previous') ? true : this.options.disablePreviousStep;\n\t\t\tthis.currentStep = this.options.selectedItem.step;\n\t\t\tthis.numSteps = this.$element.find('.steps li').length;\n\t\t\tthis.$prevBtn = this.$element.find('button.btn-prev');\n\t\t\tthis.$nextBtn = this.$element.find('button.btn-next');\n\n\t\t\tvar kids = this.$nextBtn.children().detach();\n\t\t\tthis.nextText = langx.trim(this.$nextBtn.text());\n\t\t\tthis.$nextBtn.append(kids);\n\n\t\t\tvar steps = this.$element.children('.steps-container');\n\t\t\t// maintains backwards compatibility with < 3.8, will be removed in the future\n\t\t\tif (steps.length === 0) {\n\t\t\t\tsteps = this.$element;\n\t\t\t\tthis.$element.addClass('no-steps-container');\n\t\t\t\tif (window && window.console && window.console.warn) {\n\t\t\t\t\twindow.console.warn('please update your wizard markup to include \".steps-container\" as seen in http://getfuelux.com/javascript.html#wizard-usage-markup');\n\t\t\t\t}\n\t\t\t}\n\t\t\tsteps = steps.find('.steps');\n\n\t\t\t// handle events\n\t\t\tthis.$prevBtn.on('click.fu.wizard', langx.proxy(this.previous, this));\n\t\t\tthis.$nextBtn.on('click.fu.wizard', langx.proxy(this.next, this));\n\t\t\tsteps.on('click.fu.wizard', 'li.complete', langx.proxy(this.stepclicked, this));\n\n\t\t\tthis.selectedItem(this.options.selectedItem);\n\n\t\t\tif (this.options.disablePreviousStep) {\n\t\t\t\tthis.$prevBtn.attr('disabled', true);\n\t\t\t\tthis.$element.find('.steps').addClass('previous-disabled');\n\t\t\t}\n\t\t},\n\n\t\tdestroy: function () {\n\t\t\tthis.$element.remove();\n\t\t\t// any external bindings [none]\n\t\t\t// empty elements to return to original markup [none]\n\t\t\t// returns string of markup\n\t\t\treturn this.$element[0].outerHTML;\n\t\t},\n\n\t\t//index is 1 based\n\t\t//second parameter can be array of objects [{ ... }, { ... }] or you can pass n additional objects as args\n\t\t//object structure is as follows (all params are optional): { badge: '', label: '', pane: '' }\n\t\taddSteps: function (index) {\n\t\t\tvar items = [].slice.call(arguments).slice(1);\n\t\t\tvar $steps = this.$element.find('.steps');\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\t\t\tvar i, l, $pane, $startPane, $startStep, $step;\n\n\t\t\tindex = (index === -1 || (index > (this.numSteps + 1))) ? this.numSteps + 1 : index;\n\t\t\tif (items[0] instanceof Array) {\n\t\t\t\titems = items[0];\n\t\t\t}\n\n\t\t\t$startStep = $steps.find('li:nth-child(' + index + ')');\n\t\t\t$startPane = $stepContent.find('.step-pane:nth-child(' + index + ')');\n\t\t\tif ($startStep.length < 1) {\n\t\t\t\t$startStep = null;\n\t\t\t}\n\n\t\t\tfor (i = 0, l = items.length; i < l; i++) {\n\t\t\t\t$step = $('<li data-step=\"' + index + '\"><span class=\"badge badge-info\"></span></li>');\n\t\t\t\t$step.append(items[i].label || '').append('<span class=\"chevron\"></span>');\n\t\t\t\t$step.find('.badge').append(items[i].badge || index);\n\n\t\t\t\t$pane = $('<div class=\"step-pane\" data-step=\"' + index + '\"></div>');\n\t\t\t\t$pane.append(items[i].pane || '');\n\n\t\t\t\tif (!$startStep) {\n\t\t\t\t\t$steps.append($step);\n\t\t\t\t\t$stepContent.append($pane);\n\t\t\t\t} else {\n\t\t\t\t\t$startStep.before($step);\n\t\t\t\t\t$startPane.before($pane);\n\t\t\t\t}\n\n\t\t\t\tindex++;\n\t\t\t}\n\n\t\t\tthis.syncSteps();\n\t\t\tthis.numSteps = $steps.find('li').length;\n\t\t\tthis.setState();\n\t\t},\n\n\t\t//index is 1 based, howMany is number to remove\n\t\tremoveSteps: function (index, howMany) {\n\t\t\tvar action = 'nextAll';\n\t\t\tvar i = 0;\n\t\t\tvar $steps = this.$element.find('.steps');\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\t\t\tvar $start;\n\n\t\t\thowMany = (howMany !== undefined) ? howMany : 1;\n\n\t\t\tif (index > $steps.find('li').length) {\n\t\t\t\t$start = $steps.find('li:last');\n\t\t\t} else {\n\t\t\t\t$start = $steps.find('li:nth-child(' + index + ')').prev();\n\t\t\t\tif ($start.length < 1) {\n\t\t\t\t\taction = 'children';\n\t\t\t\t\t$start = $steps;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t$start[action]().each(function () {\n\t\t\t\tvar item = $(this);\n\t\t\t\tvar step = item.attr('data-step');\n\t\t\t\tif (i < howMany) {\n\t\t\t\t\titem.remove();\n\t\t\t\t\t$stepContent.find('.step-pane[data-step=\"' + step + '\"]:first').remove();\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\ti++;\n\t\t\t});\n\n\t\t\tthis.syncSteps();\n\t\t\tthis.numSteps = $steps.find('li').length;\n\t\t\tthis.setState();\n\t\t},\n\n\t\tsetState: function () {\n\t\t\tvar canMovePrev = (this.currentStep > 1);//remember, steps index is 1 based...\n\t\t\tvar isFirstStep = (this.currentStep === 1);\n\t\t\tvar isLastStep = (this.currentStep === this.numSteps);\n\n\t\t\t// disable buttons based on current step\n\t\t\tif (!this.options.disablePreviousStep) {\n\t\t\t\tthis.$prevBtn.attr('disabled', (isFirstStep === true || canMovePrev === false));\n\t\t\t}\n\n\t\t\t// change button text of last step, if specified\n\t\t\tvar last = this.$nextBtn.attr('data-last');\n\t\t\tif (last) {\n\t\t\t\tthis.lastText = last;\n\t\t\t\t// replace text\n\t\t\t\tvar text = this.nextText;\n\t\t\t\tif (isLastStep === true) {\n\t\t\t\t\ttext = this.lastText;\n\t\t\t\t\t// add status class to wizard\n\t\t\t\t\tthis.$element.addClass('complete');\n\t\t\t\t} else {\n\t\t\t\t\tthis.$element.removeClass('complete');\n\t\t\t\t}\n\n\t\t\t\tvar kids = this.$nextBtn.children().detach();\n\t\t\t\tthis.$nextBtn.text(text).append(kids);\n\t\t\t}\n\n\t\t\t// reset classes for all steps\n\t\t\tvar $steps = this.$element.find('.steps li');\n\t\t\t$steps.removeClass('active').removeClass('complete');\n\t\t\t$steps.find('span.badge').removeClass('badge-info').removeClass('badge-success');\n\n\t\t\t// set class for all previous steps\n\t\t\tvar prevSelector = '.steps li:lt(' + (this.currentStep - 1) + ')';\n\t\t\tvar $prevSteps = this.$element.find(prevSelector);\n\t\t\t$prevSteps.addClass('complete');\n\t\t\t$prevSteps.find('span.badge').addClass('badge-success');\n\n\t\t\t// set class for current step\n\t\t\tvar currentSelector = '.steps li:eq(' + (this.currentStep - 1) + ')';\n\t\t\tvar $currentStep = this.$element.find(currentSelector);\n\t\t\t$currentStep.addClass('active');\n\t\t\t$currentStep.find('span.badge').addClass('badge-info');\n\n\t\t\t// set display of target element\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\t\t\tvar target = $currentStep.attr('data-step');\n\t\t\t$stepContent.find('.step-pane').removeClass('active');\n\t\t\t$stepContent.find('.step-pane[data-step=\"' + target + '\"]:first').addClass('active');\n\n\t\t\t// reset the wizard position to the left\n\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: 0');\n\n\t\t\t// check if the steps are wider than the container div\n\t\t\tvar totalWidth = 0;\n\t\t\tthis.$element.find('.steps > li').each(function () {\n\t\t\t\ttotalWidth += $(this).outerWidth();\n\t\t\t});\n\t\t\tvar containerWidth = 0;\n\t\t\tif (this.$element.find('.actions').length) {\n\t\t\t\tcontainerWidth = this.$element.width() - this.$element.find('.actions').first().outerWidth();\n\t\t\t} else {\n\t\t\t\tcontainerWidth = this.$element.width();\n\t\t\t}\n\n\t\t\tif (totalWidth > containerWidth) {\n\t\t\t\t// set the position so that the last step is on the right\n\t\t\t\tvar newMargin = totalWidth - containerWidth;\n\t\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: -' + newMargin + 'px');\n\n\t\t\t\t// set the position so that the active step is in a good\n\t\t\t\t// position if it has been moved out of view\n\t\t\t\tif (this.$element.find('li.active').first().position().left < 200) {\n\t\t\t\t\tnewMargin += this.$element.find('li.active').first().position().left - 200;\n\t\t\t\t\tif (newMargin < 1) {\n\t\t\t\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: 0');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: -' + newMargin + 'px');\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// only fire changed event after initializing\n\t\t\tif (typeof (this.initialized) !== 'undefined') {\n\t\t\t\tvar e = eventer.create('changed.fu.wizard');\n\t\t\t\tthis.$element.trigger(e, {\n\t\t\t\t\tstep: this.currentStep\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.initialized = true;\n\t\t},\n\n\t\tstepclicked: function (e) {\n\t\t\tvar li = $(e.currentTarget);\n\t\t\tvar index = this.$element.find('.steps li').index(li);\n\n\t\t\tif (index < this.currentStep && this.options.disablePreviousStep) {//enforce restrictions\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tvar evt = eventer.create('stepclicked.fu.wizard');\n\t\t\t\tthis.$element.trigger(evt, {\n\t\t\t\t\tstep: index + 1\n\t\t\t\t});\n\t\t\t\tif (evt.isDefaultPrevented()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.currentStep = (index + 1);\n\t\t\t\tthis.setState();\n\t\t\t}\n\t\t},\n\n\t\tsyncSteps: function () {\n\t\t\tvar i = 1;\n\t\t\tvar $steps = this.$element.find('.steps');\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\n\t\t\t$steps.children().each(function () {\n\t\t\t\tvar item = $(this);\n\t\t\t\tvar badge = item.find('.badge');\n\t\t\t\tvar step = item.attr('data-step');\n\n\t\t\t\tif (!isNaN(parseInt(badge.html(), 10))) {\n\t\t\t\t\tbadge.html(i);\n\t\t\t\t}\n\n\t\t\t\titem.attr('data-step', i);\n\t\t\t\t$stepContent.find('.step-pane[data-step=\"' + step + '\"]:last').attr('data-step', i);\n\t\t\t\ti++;\n\t\t\t});\n\t\t},\n\n\t\tprevious: function () {\n\t\t\tif (this.options.disablePreviousStep || this.currentStep === 1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar e = eventer.create('actionclicked.fu.wizard');\n\t\t\tthis.$element.trigger(e, {\n\t\t\t\tstep: this.currentStep,\n\t\t\t\tdirection: 'previous'\n\t\t\t});\n\t\t\tif (e.isDefaultPrevented()) {\n\t\t\t\treturn;\n\t\t\t}// don't increment ...what? Why?\n\n\t\t\tthis.currentStep -= 1;\n\t\t\tthis.setState();\n\n\t\t\t// only set focus if focus is still on the $nextBtn (avoid stomping on a focus set programmatically in actionclicked callback)\n\t\t\tif (this.$prevBtn.is(':focus')) {\n\t\t\t\tvar firstFormField = this.$element.find('.active').find('input, select, textarea')[0];\n\n\t\t\t\tif (typeof firstFormField !== 'undefined') {\n\t\t\t\t\t// allow user to start typing immediately instead of having to click on the form field.\n\t\t\t\t\t$(firstFormField).focus();\n\t\t\t\t} else if (this.$element.find('.active input:first').length === 0 && this.$prevBtn.is(':disabled')) {\n\t\t\t\t\t//only set focus on a button as the last resort if no form fields exist and the just clicked button is now disabled\n\t\t\t\t\tthis.$nextBtn.focus();\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\tnext: function () {\n\t\t\tvar e = eventer.create('actionclicked.fu.wizard');\n\t\t\tthis.$element.trigger(e, {\n\t\t\t\tstep: this.currentStep,\n\t\t\t\tdirection: 'next'\n\t\t\t});\n\t\t\tif (e.isDefaultPrevented()) {\n\t\t\t\treturn;\n\t\t\t}// respect preventDefault in case dev has attached validation to step and wants to stop propagation based on it.\n\n\t\t\tif (this.currentStep < this.numSteps) {\n\t\t\t\tthis.currentStep += 1;\n\t\t\t\tthis.setState();\n\t\t\t} else {//is last step\n\t\t\t\tthis.$element.trigger('finished.fu.wizard');\n\t\t\t}\n\n\t\t\t// only set focus if focus is still on the $nextBtn (avoid stomping on a focus set programmatically in actionclicked callback)\n\t\t\tif (this.$nextBtn.is(':focus')) {\n\t\t\t\tvar firstFormField = this.$element.find('.active').find('input, select, textarea')[0];\n\n\t\t\t\tif (typeof firstFormField !== 'undefined') {\n\t\t\t\t\t// allow user to start typing immediately instead of having to click on the form field.\n\t\t\t\t\t$(firstFormField).focus();\n\t\t\t\t} else if (this.$element.find('.active input:first').length === 0 && this.$nextBtn.is(':disabled')) {\n\t\t\t\t\t//only set focus on a button as the last resort if no form fields exist and the just clicked button is now disabled\n\t\t\t\t\tthis.$prevBtn.focus();\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\tselectedItem: function (selectedItem) {\n\t\t\tvar retVal, step;\n\n\t\t\tif (selectedItem) {\n\t\t\t\tstep = selectedItem.step || -1;\n\t\t\t\t//allow selection of step by data-name\n\t\t\t\tstep = Number(this.$element.find('.steps li[data-name=\"' + step + '\"]').first().attr('data-step')) || Number(step);\n\n\t\t\t\tif (1 <= step && step <= this.numSteps) {\n\t\t\t\t\tthis.currentStep = step;\n\t\t\t\t\tthis.setState();\n\t\t\t\t} else {\n\t\t\t\t\tstep = this.$element.find('.steps li.active:first').attr('data-step');\n\t\t\t\t\tif (!isNaN(step)) {\n\t\t\t\t\t\tthis.currentStep = parseInt(step, 10);\n\t\t\t\t\t\tthis.setState();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tretVal = this;\n\t\t\t} else {\n\t\t\t\tretVal = {\n\t\t\t\t\tstep: this.currentStep\n\t\t\t\t};\n\t\t\t\tif (this.$element.find('.steps li.active:first[data-name]').length) {\n\t\t\t\t\tretVal.stepname = this.$element.find('.steps li.active:first').attr('data-name');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn retVal;\n\t\t}\n\n\t});\n\n\n\t// WIZARD PLUGIN DEFINITION\n\n\t$.fn.wizard = function (option) {\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\tvar methodReturn;\n\n\t\tvar $set = this.each(function () {\n\t\t\tvar $this = $(this);\n\t\t\tvar data = $this.data('fu.wizard');\n\t\t\tvar options = typeof option === 'object' && option;\n\n\t\t\tif (!data) {\n\t\t\t\t$this.data('fu.wizard', (data = new Wizard(this, options)));\n\t\t\t}\n\n\t\t\tif (typeof option === 'string') {\n\t\t\t\tmethodReturn = data[option].apply(data, args);\n\t\t\t}\n\t\t});\n\n\t\treturn (methodReturn === undefined) ? $set : methodReturn;\n\t};\n\n\t$.fn.wizard.defaults = {\n\t\tdisablePreviousStep: false,\n\t\tselectedItem: {\n\t\t\tstep: -1\n\t\t}//-1 means it will attempt to look for \"active\" class in order to set the step\n\t};\n\n\t$.fn.wizard.Constructor = Wizard;\n\n\t$.fn.wizard.noConflict = function () {\n\t\t$.fn.wizard = old;\n\t\treturn this;\n\t};\n\n\n\t// DATA-API\n\n\t/*\n\t$(document).on('mouseover.fu.wizard.data-api', '[data-initialize=wizard]', function (e) {\n\t\tvar $control = $(e.target).closest('.wizard');\n\t\tif (!$control.data('fu.wizard')) {\n\t\t\t$control.wizard($control.data());\n\t\t}\n\t});\n\n\t// Must be domReady for AMD compatibility\n\t$(function () {\n\t\t$('[data-initialize=wizard]').each(function () {\n\t\t\tvar $this = $(this);\n\t\t\tif ($this.data('fu.wizard')) return;\n\t\t\t$this.wizard($this.data());\n\t\t});\n\t});\n\t*/\n\n\treturn $.fn.wizard ;\n\n});\n"]}